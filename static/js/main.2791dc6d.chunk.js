(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{311:function(e,t,n){e.exports=n(616)},615:function(e){e.exports={}},616:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"default",function(){return v}),n.d(r,"getUser",function(){return E});var a={};n.r(a),n.d(a,"default",function(){return w}),n.d(a,"getFriends",function(){return F}),n.d(a,"getFriendsInInstagram",function(){return j}),n.d(a,"getBannedFriends",function(){return C}),n.d(a,"getSortLongTime",function(){return k}),n.d(a,"getSortFriendsFromCity",function(){return x});var c={};n.r(c),n.d(c,"fetchedUser",function(){return V});var o={};n.r(o),n.d(o,"fetchedAllFriends",function(){return W}),n.d(o,"fetchedFriends",function(){return q}),n.d(o,"updateFriends",function(){return J});n(312),n(314);var i=n(1),s=n.n(i),l=n(65),u=n.n(l),d=n(66),f=n(24),m=n(269),h=n(67),p="SET_USER",g={photo_200:"https://pp.userapi.com/c841034/v841034569/3b8c1/pt3sOw_qhfg.jpg",first_name:"\u0412\u0430\u0441\u044f",last_name:"\u0412\u0430\u0441\u0435\u0447\u043a\u0438\u043d",city:{title:"New York"}};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case p:return Object(h.a)({},e,t.payload);default:return e}}var E=function(e){return e.user},b=n(41),_="FETCHED_FRIENDS",y="UPDATE_FRIENDS",O={users:[]};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case _:return Object(h.a)({},e,{offsetFriends:t.offsetFriends,users:Object(b.a)(t.users)});case y:return Object(h.a)({},e,{offsetFriends:t.offsetFriends,users:[].concat(Object(b.a)(e.users),Object(b.a)(t.users))});default:return e}}var F=function(e){return e.friends.users},j=function(e){return e.friends.users.filter(function(e){return e.instagram})},C=function(e){return e.friends.users.filter(function(e){return"deleted"===e.deactivated||"banned"===e.deactivated})},k=function(e){return e.friends.users.sort(function(e,t){return e.last_seen&&t.last_seen&&e.last_seen.time&&t.last_seen.time&&e.last_seen.time-t.last_seen.time})},x=function(e){},S="FETCHED_SEARCH",T={q:[]};var P=Object(d.c)({user:v,friends:w,search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case S:return Object(h.a)({},e,{q:t.search.filter(function(e){return"profile"===e.type})});default:return e}}}),L=n(68),A=n(52),I=n(6),B=(n(487),n(14)),R=n.n(B),N=n(25),D="5.95",z={access_token:"",dateTime:"",scope:""},U=function(){z.access_token="",z.dateTime="",z.scope=""},H=function(){var e=Object(N.a)(R.a.mark(function e(t){var n,r;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.send("VKWebAppGetAuthToken",{app_id:7080438,scope:t});case 3:return n=e.sent,e.next=6,n.data.access_token;case 6:return r=e.sent,console.log("access_token",r),e.abrupt("return",r);case 11:throw e.prev=11,e.t0=e.catch(0),Error(e.t0.message);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(N.a)(R.a.mark(function e(t){var n,r,a,c,o,i;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,1e6,n=Date.now(),r=z.dateTime||Date.now()-1e6+1,a=n-r,c=z.scope!==t,o=!z.oneFetched,!(!localStorage.access_token&&a>1e6)&&!c||!o){e.next=15;break}return e.next=11,H(t);case 11:i=e.sent,z.access_token=i,z.dateTime=n,z.scope=t;case 15:return e.next=17,z.access_token;case 17:return e.abrupt("return",e.sent);case 20:throw e.prev=20,e.t0=e.catch(0),U(),Error(e.t0.message);case 24:case"end":return e.stop()}},e,null,[[0,20]])}));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(N.a)(R.a.mark(function e(){var t;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.a.send("VKWebAppGetUserInfo",{});case 3:return t=e.sent,e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(N.a)(R.a.mark(function e(){var t,n,r,a,c,o=arguments;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:100,n=o.length>1&&void 0!==o[1]?o[1]:0,e.prev=2,e.next=5,G("friends, groups");case 5:return r=e.sent,"friends.get","connections,deactivated,nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities",a={access_token:r,v:D,fields:"connections,deactivated,nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities",count:t,offset:n},e.next=11,L.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:a});case 11:return c=e.sent,e.next=14,c.data.response.items;case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t0=e.catch(2),U(),Error(e.t0.message);case 21:case"end":return e.stop()}},e,null,[[2,17]])}));return function(){return e.apply(this,arguments)}}(),V=function(){return function(){var e=Object(N.a)(R.a.mark(function e(t){var n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:n=e.sent,t({type:p,payload:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},W=function(e){var t=0,n=function(){var r=Object(N.a)(R.a.mark(function r(a){var c;return R.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,K(100,t);case 2:c=r.sent,!!c.length&&t<=5e3&&(console.log("fetchedAllUsers",t),t+=100,a({type:y,users:Object(b.a)(c),offsetFriends:t}),n(a)),e&&e();case 6:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}();return n},q=function(e){return function(){var t=Object(N.a)(R.a.mark(function t(n){var r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(100,0);case 2:r=t.sent,n({type:_,users:Object(b.a)(r)}),e&&e();case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=Object(N.a)(R.a.mark(function t(n){var r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("UPDATE_FRIENDS",e),t.next=3,K(100,e);case 3:r=t.sent,n({type:y,users:Object(b.a)(r)});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},Y=n(69),Q=n.n(Y),X=n(118),Z=function(e){var t=e.last_seen,n=e.longTime,r=e.description,a=e.city,c=e.country;return n&&t&&t.time?"\u0431\u044b\u043b \u0432 \u0441\u0435\u0442\u0438 ".concat(function(e){var t=new Date(1e3*e),n=t.toLocaleDateString(),r=t.toLocaleTimeString().slice(0,5);return"".concat(r," ").concat(n)}(t.time)):r||"".concat(a.title," ").concat(c.title)},$=function(e){var t=e.size,n=e.id,r=e.photo_50,a=e.photo_100,c=e.photo_200,o=e.photo_200_orig,i=e.city,l=e.country,u=e.first_name,d=e.last_name,f=(e.bdate,e.description),m=e.instagram,h=e.connections,p=Object(X.a)(e,["size","id","photo_50","photo_100","photo_200","photo_200_orig","city","country","first_name","last_name","bdate","description","instagram","connections"]),g=function(e){var t=e.id,n=e.type,r=e.instagram;switch(n){case"vk":return"https://vk.com/id".concat(t);case"instagram":return"https://www.instagram.com/".concat(r);default:return"https://vk.com/id".concat(t)}}({id:n,type:h,instagram:m}),v=Z({last_seen:p.last_seen,longTime:p.longTime,description:f,city:i,country:l});return s.a.createElement(I.Cell,{key:n,before:s.a.createElement(I.Avatar,{size:t,src:o||c||a||r}),size:"l",description:v,onClick:function(){return function(e){window.location.href=e}(g)}},"".concat(u," ").concat(d))};$.defaultProps={size:48,city:{title:""},country:{title:""},connections:"vk"};var ee=$,te=Object(f.b)(function(e){return{fetchedUser:r.getUser(e)}},null)(function(e){var t=e.id,n=e.go,r=e.fetchedUser,a=e.dispatch,o=Object(i.useState)(!1),l=Object(A.a)(o,2),u=l[0],d=l[1];!function(e){Object(i.useEffect)(function(){e((0,c.fetchedUser)())},[])}(a);return s.a.createElement(I.Panel,{id:t},s.a.createElement(I.PanelHeader,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),s.a.createElement(I.PullToRefresh,{onRefresh:function(){d(!0),setTimeout(function(){d(!1)},2e3)},isFetching:u},s.a.createElement(I.Group,{title:""},s.a.createElement(ee,Object.assign({size:36},r,{go:n}))),s.a.createElement(I.Group,{title:"\u0414\u0440\u0443\u0437\u044c\u044f"},s.a.createElement(I.List,null,s.a.createElement(I.Cell,{onClick:n,"data-to":"friends",asideContent:s.a.createElement(Q.a,null)},"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0434\u0440\u0443\u0437\u044c\u044f\u043c"),s.a.createElement(I.Cell,{onClick:n,"data-to":"friendsInInstagram",asideContent:s.a.createElement(Q.a,null)},"\u0414\u0440\u0443\u0437\u044c\u044f \u0432 \u0438\u043d\u0441\u0442\u0430\u0433\u0440\u0430\u043c\u043c\u0435"),s.a.createElement(I.Cell,{onClick:n,"data-to":"deletedAndBanned",asideContent:s.a.createElement(Q.a,null)},"\u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0435 / \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435"),s.a.createElement(I.Cell,{onClick:n,"data-to":"sortlongtime",asideContent:s.a.createElement(Q.a,null)},"\u043a\u0442\u043e \u0434\u0430\u0432\u043d\u043e \u0437\u0430\u0445\u043e\u0434\u0438\u043b?"))),s.a.createElement(I.Group,{title:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"},s.a.createElement(I.List,null,s.a.createElement(I.Cell,{onClick:n,"data-to":"city",asideContent:s.a.createElement(Q.a,null)},"\u0413\u043e\u0440\u043e\u0434\u0430")))))}),ne=function(e){var t=e.handleScroll,n=e.handleRefresh,r=e.isFetching,a=e.list,c=(e.component,e.footerNameCount),o=e.groupTitle,l=e.children;return s.a.createElement(I.PullToRefresh,{onScroll:t,onRefresh:n,isFetching:r},!a.length&&!r&&s.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},s.a.createElement(I.Spinner,{size:"regular",style:{marginTop:20}})),a.length>0&&s.a.createElement(I.Group,{title:o},a.map(function(e,t){return s.a.createElement(I.List,{key:e.id||t},Object(i.cloneElement)(l,e),s.a.createElement("span",null))})),s.a.createElement(I.Footer,null,a.length," ",c))};ne.defaultProps={handleScroll:function(){}};var re=ne,ae=n(270),ce=n.n(ae),oe=n(164),ie=n.n(oe),se=Object(I.platform)(),le=function(e){var t=e.handelClick,n=e.dataTo,r=e.title;return s.a.createElement(I.PanelHeader,{left:s.a.createElement(I.HeaderButton,{onClick:t,"data-to":n},se===I.IOS?s.a.createElement(ce.a,null):s.a.createElement(ie.a,null))},r)},ue=function(e){var t=e.go,n=e.usersList,r=e.handleScrollBottom,a=e.handleFetched,c=e.searchFilter,o=e.isSearch,l=e.headerPanelTitle,u=e.footerNameCount,d=Object(X.a)(e,["go","usersList","handleScrollBottom","handleFetched","searchFilter","isSearch","headerPanelTitle","footerNameCount"]),f=Object(i.useState)(!1),m=Object(A.a)(f,2),h=m[0],p=m[1],g=Object(i.useState)(""),v=Object(A.a)(g,2),E=v[0],b=v[1],_=Object(i.useState)(""),y=Object(A.a)(_,2),O=y[0],w=y[1];Object(i.useEffect)(function(){window.addEventListener("scroll",j),a(F)},[]);var F=function(){return p(!1)},j=function(e){var t=e.target.documentElement.scrollHeight,n=e.target.documentElement.clientHeight;window.pageYOffset+5>=t-n&&r()};return s.a.createElement(s.a.Fragment,null,s.a.createElement(le,{title:l,handelClick:t,dataTo:"home"}),n.length>0&&o&&s.a.createElement(I.Search,{value:E,onChange:function(e){var t=c(e);b(e),w(t)},onClose:function(){b(""),w("")}}),s.a.createElement(re,{handleScroll:j,handleRefresh:function(){p(!0),a(F)},isFetching:h,list:O.length?O:n,footerNameCount:u},s.a.createElement(ee,Object.assign({size:36,go:t},d))))};ue.defaultProps={isSearch:!1,searchFilter:function(){},headerPanelTitle:"",footerNameCount:""};var de=ue,fe=Object(f.b)(function(e){return{users:a.getFriends(e)}},null)(function(e){var t=e.id,n=e.go,r=e.users,a=(e.offsetFriends,e.dispatch),c=o.fetchedAllFriends;return s.a.createElement(I.Panel,{id:t},s.a.createElement(de,{go:n,usersList:r,handleScrollBottom:function(){},handleFetched:function(e){r.length||a(c(e))},searchFilter:function(e){return r.filter(function(t){var n=t.first_name,r=t.last_name,a=t.status,c=t.domain;return"".concat(n," ").concat(r," ").concat(c," ").concat(a).toLowerCase().indexOf(e.toLowerCase())>-1})},isSearch:!0,headerPanelTitle:"\u0414\u0440\u0443\u0437\u044c\u044f",footerNameCount:"\u0434\u0440\u0443\u0437\u0435\u0439"}))}),me=Object(f.b)(function(e){return{users:a.getFriendsInInstagram(e)}},null)(function(e){var t=e.id,n=e.go,r=e.users,a=(e.getOffsetInstagramFriends,e.dispatch),c=o.fetchedAllFriends;return s.a.createElement(I.Panel,{id:t},s.a.createElement(de,{go:n,usersList:r,handleScrollBottom:function(){},handleFetched:function(e){r.length||a(c(e))},searchFilter:function(e){return r.filter(function(t){var n=t.first_name,r=t.last_name,a=t.status,c=t.domain;return"".concat(n," ").concat(r," ").concat(c," ").concat(a).toLowerCase().indexOf(e.toLowerCase())>-1})},isSearch:!0,headerPanelTitle:"\u0414\u0440\u0443\u0437\u044c\u044f",footerNameCount:"\u0434\u0440\u0443\u0437\u0435\u0439",connections:"instagram"}))}),he=Object(f.b)(function(e){return{users:a.getBannedFriends(e)}},null)(function(e){var t=e.id,n=e.go,r=e.users,a=(e.getOffsetBannedFriends,e.dispatch),c=o.fetchedAllFriends;return s.a.createElement(I.Panel,{id:t},s.a.createElement(de,{go:n,usersList:r,handleScrollBottom:function(){},handleFetched:function(e){r.length||a(c(e))},searchFilter:function(e){return r.filter(function(t){var n=t.first_name,r=t.last_name,a=t.status,c=t.domain;return"".concat(n," ").concat(r," ").concat(c," ").concat(a).toLowerCase().indexOf(e.toLowerCase())>-1})},isSearch:!0,headerPanelTitle:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435/\u0417\u0430\u0431\u0430\u043d\u0435\u043d\u043d\u044b\u0435",footerNameCount:"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445 \u0438 \u0437\u0430\u0431\u0435\u043d\u043d\u044b\u0445"}))}),pe=Object(f.b)(function(e){return{users:a.getSortLongTime(e)}},null)(function(e){var t=e.id,n=e.go,r=e.users,a=(e.offsetFriends,e.dispatch),c=o.fetchedAllFriends;return s.a.createElement(I.Panel,{id:t},s.a.createElement(de,{go:n,usersList:r,handleScrollBottom:function(){},handleFetched:function(e){r.length||a(c(e))},searchFilter:function(e){return r.filter(function(t){var n=t.first_name,r=t.last_name,a=t.status,c=t.domain;return"".concat(n," ").concat(r," ").concat(c," ").concat(a).toLowerCase().indexOf(e.toLowerCase())>-1})},isSearch:!0,headerPanelTitle:"\u0414\u0440\u0443\u0437\u044c\u044f",footerNameCount:"\u0434\u0440\u0443\u0437\u0435\u0439",longTime:!0}))}),ge=n(271),ve=n(272),Ee=n(284),be=n(273),_e=n(285),ye=n(94),Oe=(n(615),["#0088FE","#00C49F","#FFBB28","#FF8042"]),we={top:0,left:"3px",lineHeight:"24px"},Fe=function(e){var t=e.cx,n=e.cy,r=e.midAngle,a=e.innerRadius,c=e.outerRadius,o=(e.percent,e.index,Math.PI/180),i=a+.5*(c-a),l=t+i*Math.cos(-r*o),u=n+i*Math.sin(-r*o);return s.a.createElement("text",{x:l,y:u,fill:"white",textAnchor:l>t?"start":"end",dominantBaseline:"central"})},je=function(e){function t(e){return Object(ge.a)(this,t),Object(Ee.a)(this,Object(be.a)(t).call(this,e))}return Object(_e.a)(t,e),Object(ve.a)(t,[{key:"componentWillMount",value:function(){(0,this.props.dispatch)((0,o.fetchedAllFriends)())}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.go,r=e.users,a={};r.map(function(e){e.city&&(a[e.city.id]?a[e.city.id].value+=1:a[e.city.id]={id:e.city.id,name:e.city.title,value:1})});var c=Object.values(a);return s.a.createElement(I.Panel,{id:t},s.a.createElement(le,{title:"\u0413\u043e\u0440\u043e\u0434\u0430",handelClick:n,dataTo:"home"}),s.a.createElement(I.Group,null,s.a.createElement(ye.d,{width:320,height:300,onMouseEnter:this.onPieEnter},s.a.createElement(ye.c,{dataKey:"value",data:c,cx:"50%",cy:"40%",labelLine:!1,label:Fe,outerRadius:60,fill:"#8884d8"},c.map(function(e,t){return s.a.createElement(ye.a,{key:t,fill:Oe[t%Oe.length]})})),s.a.createElement(ye.b,{iconSize:10,iconType:"circle",width:320,height:5,layout:"vertical",verticalAlign:"middle",wrapperStyle:we}))))}}]),t}(i.Component),Ce=Object(f.b)(function(e){return{users:a.getFriends(e)}},null)(je),ke=function(e){var t=Object(i.useState)("home"),n=Object(A.a)(t,2),r=n[0],a=n[1],c=function(e){return a(e.currentTarget.dataset.to)};return s.a.createElement(I.View,{activePanel:r},s.a.createElement(te,{id:"home",go:c}),s.a.createElement(fe,{id:"friends",go:c}),s.a.createElement(me,{id:"friendsInInstagram",go:c}),s.a.createElement(he,{id:"deletedAndBanned",go:c}),s.a.createElement(pe,{id:"sortlongtime",go:c}),s.a.createElement(Ce,{id:"city",go:c}))},xe=Object(d.d)(P,Object(d.a)(m.a));L.a.send("VKWebAppInit",{}),u.a.render(s.a.createElement(function(){return s.a.createElement(f.a,{store:xe},s.a.createElement(ke,null))},null),document.getElementById("root"))}},[[311,1,2]]]);
//# sourceMappingURL=main.2791dc6d.chunk.js.map