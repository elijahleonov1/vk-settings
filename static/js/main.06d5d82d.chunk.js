(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,n){e.exports=n(361)},361:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"default",function(){return b}),n.d(r,"getUser",function(){return _});var a={};n.r(a),n.d(a,"default",function(){return k}),n.d(a,"getFriends",function(){return x});var c={};n.r(c),n.d(c,"default",function(){return F}),n.d(c,"getSearch",function(){return P});var o={};n.r(o),n.d(o,"fetchedUser",function(){return W});var s={};n.r(s),n.d(s,"fetchedFriends",function(){return L}),n.d(s,"updateFriends",function(){return B});var u={};n.r(u),n.d(u,"fetchenSearch",function(){return N});n(154),n(156);var i=n(0),l=n.n(i),f=n(64),d=n.n(f),p=n(50),h=n(38),m=n(152),v=n(51),g="SET_USER",E={photo_200:"https://pp.userapi.com/c841034/v841034569/3b8c1/pt3sOw_qhfg.jpg",first_name:"\u0412\u0430\u0441\u044f",last_name:"\u0412\u0430\u0441\u0435\u0447\u043a\u0438\u043d",city:{title:"New York"}};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case g:return Object(v.a)({},e,t.payload);default:return e}}var _=function(e){return e.user},w=n(59),O="FETCHED_FRIENDS",j="UPDATE_FRIENDS",y={users:[]};function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case O:return Object(v.a)({},e,{users:Object(w.a)(t.users)});case j:return Object(v.a)({},e,{users:[].concat(Object(w.a)(e.users),Object(w.a)(t.users))});default:return e}}var x=function(e){return e.friends.users},S="FETCHED_SEARCH",C={q:[]};function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.thpe){case S:return Object(v.a)({},e,{q:[t.search]});default:return e}}var P=function(e){return e.search.q},H=Object(p.c)({user:b,friends:k,search:F}),T=n(52),U=n(34),A=n(2),I=(n(358),n(10)),R=n.n(I),z=n(23),q="5.95",D=function(){var e=Object(z.a)(R.a.mark(function e(t){var n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.send("VKWebAppGetAuthToken",{app_id:7080438,scope:t});case 3:return n=e.sent,e.next=6,n.data.access_token;case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(z.a)(R.a.mark(function e(){var t;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.send("VKWebAppGetUserInfo",{});case 3:return t=e.sent,e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(z.a)(R.a.mark(function e(){var t,n,r,a,c,o=arguments;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:100,n=o.length>1&&void 0!==o[1]?o[1]:0,e.prev=2,e.next=5,D("friends");case 5:return r=e.sent,"friends.get","nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities",a={access_token:r,v:q,fields:"nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities",count:t,offset:n},e.next=11,T.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:a});case 11:return c=e.sent,e.next=14,c.data.response.items;case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t0=e.catch(2),Error(e.t0.message);case 20:case"end":return e.stop()}},e,null,[[2,17]])}));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(z.a)(R.a.mark(function e(){var t,n,r,a,c,o,s,u,i=arguments;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",n=i.length>1&&void 0!==i[1]?i[1]:0,r=i.length>2&&void 0!==i[2]?i[2]:10,a=i.length>3&&void 0!==i[3]?i[3]:"",c=i.length>4&&void 0!==i[4]?i[4]:1,e.prev=5,e.next=8,D("friends,groups");case 8:return o=e.sent,"search.getHints",s={access_token:o,v:q,q:t,offset:n,limit:r,filters:a,search_global:c},e.next=13,T.a.send("VKWebAppCallAPIMethod",{method:"search.getHints",params:s});case 13:return u=e.sent,e.next=16,u.data.response.items;case 16:return e.abrupt("return",e.sent);case 19:throw e.prev=19,e.t0=e.catch(5),Error(e.t0.message);case 22:case"end":return e.stop()}},e,null,[[5,19]])}));return function(){return e.apply(this,arguments)}}(),W=function(){return function(){var e=Object(z.a)(R.a.mark(function e(t){var n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:n=e.sent,t({type:g,payload:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(z.a)(R.a.mark(function t(n){var r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G();case 2:r=t.sent,n({type:O,users:r}),e&&e();case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=Object(z.a)(R.a.mark(function t(n){var r;return R.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(100,e);case 2:r=t.sent,n({type:j,users:Object(w.a)(r)});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},N=function(e){var t=e.q;return function(){var e=Object(z.a)(R.a.mark(function e(n){var r;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:r=e.sent,console.log(r),n({type:S,search:r});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},J=n(79),M=n.n(J),Y=function(e){var t=e.size,n=void 0===t?40:t,r=e.fetchedUser,a=r.id,c=r.photo_50,o=r.photo_100,s=r.photo_200,u=r.photo_200_orig,i=r.city,f=void 0===i?{title:""}:i,d=r.first_name,p=r.last_name,h=r.bdate,m=u||s||o||c;return l.a.createElement(A.Cell,{key:a,before:l.a.createElement(A.Avatar,{size:n,src:m,onClick:function(){return window.open("https://vk.com/id".concat(a))}}),size:"l",description:f.title,bottomContent:h&&"\u0414\u0435\u043d\u044c \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f: ".concat(h)},"".concat(d," ").concat(p))},Q=Object(h.b)(function(e){return{fetchedUser:(0,r.getUser)(e)}},null)(function(e){var t=e.id,n=e.go,r=e.fetchedUser,a=e.dispatch,c=Object(i.useState)(!1),s=Object(U.a)(c,2),u=s[0],f=s[1];!function(e){Object(i.useEffect)(function(){e((0,o.fetchedUser)())},[])}(a);return l.a.createElement(A.Panel,{id:t},l.a.createElement(A.PanelHeader,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),l.a.createElement(A.PullToRefresh,{onRefresh:function(){f(!0),setTimeout(function(){f(!1)},2e3)},isFetching:u},l.a.createElement(A.Group,{title:""},l.a.createElement(Y,{size:48,fetchedUser:r,go:n})),l.a.createElement(A.Group,{title:""},l.a.createElement(A.List,null,l.a.createElement(A.Cell,{onClick:n,"data-to":"friends",asideContent:l.a.createElement(M.a,null)},"\u0414\u0440\u0443\u0437\u044c\u044f"),l.a.createElement(A.Cell,{onClick:n,"data-to":"search",asideContent:l.a.createElement(M.a,null)},"\u041f\u043e\u0438\u0441\u043a")))))}),X=n(80),Z=n.n(X),$=n(65),ee=n.n($),te=Object(h.b)(function(e){return{users:(0,a.getFriends)(e)}},null)(function(e){var t=100,n=e.id,r=e.go,a=e.users,c=e.dispatch,o=Object(i.useState)(!1),u=Object(U.a)(o,2),f=u[0],d=u[1],p=Object(A.platform)(),h=s.updateFriends,m=s.fetchedFriends;Object(i.useEffect)(function(){window.addEventListener("scroll",g),c(m(v))},[]);var v=function(){return d(!1)},g=function(e){var n=e.target.documentElement.scrollHeight,r=e.target.documentElement.clientHeight;window.pageYOffset+5>=n-r&&(c(h(t)),t+=100)};return l.a.createElement(A.Panel,{id:n},l.a.createElement(A.PanelHeader,{left:l.a.createElement(A.HeaderButton,{onClick:r,"data-to":"home"},p===A.IOS?l.a.createElement(Z.a,null):l.a.createElement(ee.a,null))},"\u0414\u0440\u0443\u0437\u044c\u044f"),l.a.createElement(A.PullToRefresh,{onScroll:g,onRefresh:function(){d(!0),c(m(v))},isFetching:f},!a.length&&!f&&l.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},l.a.createElement(A.Spinner,{size:"regular",style:{marginTop:20}})),!!a.length&&l.a.createElement(A.Group,{title:""},a.map(function(e){return l.a.createElement(A.List,{key:e.id},l.a.createElement(Y,{size:58,fetchedUser:e,go:r}),l.a.createElement("span",null))})),l.a.createElement(A.Footer,null,a.length," \u0434\u0440\u0443\u0437\u0435\u0439")))}),ne=Object(h.b)(function(e){return{fetchedSearch:(0,c.getSearch)(e)}},null)(function(e){var t=e.id,n=e.go,r=e.dispatch,a=e.fetchedSearch,c=Object(A.platform)(),o=Object(i.useState)(!1),s=Object(U.a)(o,2),f=s[0],d=s[1],p=Object(i.useState)(""),h=Object(U.a)(p,2),m=h[0],v=h[1],g=u.fetchenSearch;return console.log(a),l.a.createElement(A.Panel,{id:t},l.a.createElement(A.PanelHeader,{left:l.a.createElement(A.HeaderButton,{onClick:n,"data-to":"home"},c===A.IOS?l.a.createElement(Z.a,null):l.a.createElement(ee.a,null))},"\u041f\u043e\u0438\u0441\u043a"),l.a.createElement(A.Search,{value:m,onChange:function(e){v(e),r(g({q:e}))}}),l.a.createElement(A.PullToRefresh,{onRefresh:function(){d(!0),setTimeout(function(){d(!1)},2e3)},isFetching:f},a.length>0&&l.a.createElement(A.List,null,a.map(function(e){return l.a.createElement(A.Cell,{key:e.profile.id,description:e.description,onClick:function(){return window.open("https://vk.com/id".concat(e.profile.id))}},"".concat(e.profile.first_name," ").concat(e.profile.last_name))})),l.a.createElement(A.Footer,null,a.length>0?"\u043d\u0430\u0439\u0434\u0435\u043d\u043e ".concat(a.length):"\u043f\u0443\u0441\u0442\u043e")))}),re=function(e){var t=Object(i.useState)("home"),n=Object(U.a)(t,2),r=n[0],a=n[1],c=function(e){return a(e.currentTarget.dataset.to)};return l.a.createElement(A.View,{activePanel:r},l.a.createElement(Q,{id:"home",go:c}),l.a.createElement(te,{id:"friends",go:c}),l.a.createElement(ne,{id:"search",go:c}))},ae=Object(p.d)(H,Object(p.a)(m.a));T.a.send("VKWebAppInit",{}),d.a.render(l.a.createElement(function(){return l.a.createElement(h.a,{store:ae},l.a.createElement(re,null))},null),document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.06d5d82d.chunk.js.map