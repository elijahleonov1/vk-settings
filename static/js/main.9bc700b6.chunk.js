(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,n){e.exports=n(361)},361:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"default",function(){return g}),n.d(r,"getUser",function(){return O});var a={};n.r(a),n.d(a,"default",function(){return x}),n.d(a,"getFriends",function(){return F}),n.d(a,"isFetching",function(){return U});var c={};n.r(c),n.d(c,"fetchedUser",function(){return N});var s={};n.r(s),n.d(s,"fetchedFriends",function(){return R}),n.d(s,"updateFriends",function(){return V});var o=n(12),i=n.n(o),u=n(30),l=(n(155),n(157),n(1)),f=n.n(l),d=n(62),p=n.n(d),h=n(37),m=n(56),_=n(149),v=n(63),E="SET_USER",b={photo_200:"https://pp.userapi.com/c841034/v841034569/3b8c1/pt3sOw_qhfg.jpg",first_name:"\u0412\u0430\u0441\u044f",last_name:"\u0412\u0430\u0441\u0435\u0447\u043a\u0438\u043d",city:{title:"New York"}};function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case E:return Object(v.a)({},e,t.payload);default:return e}}var O=function(e){return e.user},w=n(49),j="FETCHED_FRIENDS",y="UPDATE_FRIENDS",k={isFetching:!1,users:[]};function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case j:return Object(v.a)({},e,{users:[].concat(Object(w.a)(e.users),Object(w.a)(t.users))});case y:return Object(v.a)({},e,{isFetching:t.isFetching,users:Object(w.a)(t.users)});default:return e}}var F=function(e){return e.friends.users},U=function(e){return e.friends.isFetching},S=Object(h.c)({user:g,friends:x}),I=n(57),T=n(151),A=n(9),D=(n(360),localStorage.getItem("access_token")),P=function(){var e=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.send("VKWebAppGetUserInfo",{});case 3:return t=e.sent,e.next=7,t.data;case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),Error(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(i.a.mark(function e(){var t,n,r,a,c=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:100,n=c.length>1&&void 0!==c[1]?c[1]:0,e.prev=2,"friends.get","nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities",r={access_token:D,v:"5.95",fields:"nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities",count:t,offset:n},e.next=8,I.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:r});case 8:return a=e.sent,e.next=11,a.data.response.items;case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(2),Error(e.t0);case 17:case"end":return e.stop()}},e,null,[[2,14]])}));return function(){return e.apply(this,arguments)}}(),N=function(){return function(){var e=Object(u.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:n=e.sent,t({type:E,payload:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},R=function(){return function(){var e=Object(u.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:n=e.sent,t({type:j,users:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},V=function(){return function(){var e=Object(u.a)(i.a.mark(function e(t){var n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(100,100);case 2:return n=e.sent,e.next=5,C(100,200);case 5:r=e.sent,t({type:y,payload:[].concat(Object(w.a)(n),Object(w.a)(r))});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},z=function(e){var t=e.size,n=void 0===t?40:t,r=e.fetchedUser,a=(r.id,r.photo_50),c=r.photo_100,s=r.photo_200,o=r.photo_200_orig,i=r.city,u=void 0===i?{title:""}:i,l=r.first_name,d=r.last_name,p=r.bdate,h=o||s||c||a;return f.a.createElement(A.Cell,{before:f.a.createElement(A.Avatar,{size:n,src:h}),size:"l",description:u.title,bottomContent:p},"".concat(l," ").concat(d))},G=Object(m.b)(function(e){return{fetchedUser:(0,r.getUser)(e)}},null)(function(e){var t=e.id,n=e.go,r=e.fetchedUser;return function(e){Object(l.useEffect)(function(){e((0,c.fetchedUser)())},[])}(e.dispatch),f.a.createElement(A.Panel,{id:t},f.a.createElement(A.PanelHeader,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),f.a.createElement(A.Group,{title:""},f.a.createElement(z,{size:48,fetchedUser:r,go:n})),f.a.createElement(A.Group,{title:"\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u044b"},f.a.createElement(A.List,null,f.a.createElement(A.Cell,{expandable:!0,onClick:n,"data-to":"friends"},"\u0414\u0440\u0443\u0437\u044c\u044f"))))}),H=n(150),K=n.n(H),L=n(109),W=n.n(L),X=Object(m.b)(function(e){var t=a.isFetching;return{users:(0,a.getFriends)(e),isFetching:t(e)}},null)(function(e){var t=e.id,n=e.go,r=e.users,a=e.dispatch,c=e.isFetching,o=Object(A.platform)();!function(e){Object(l.useEffect)(function(){e((0,s.fetchedFriends)())},[])}(a);return f.a.createElement(A.Panel,{id:t},f.a.createElement(A.PanelHeader,{left:f.a.createElement(A.HeaderButton,{onClick:n,"data-to":"home"},o===A.IOS?f.a.createElement(K.a,null):f.a.createElement(W.a,null))},"\u0414\u0440\u0443\u0437\u044c\u044f"),f.a.createElement(A.PullToRefresh,{onRefresh:function(){c=!0,a((0,s.updateFriends)())},isFetching:c},!!r.length&&f.a.createElement(A.Group,{title:""},r.map(function(e){return f.a.createElement(A.List,{key:e.id},f.a.createElement(z,{fetchedUser:e,go:n}),f.a.createElement("span",null))})),f.a.createElement(A.Footer,null,r.length," \u0434\u0440\u0443\u0437\u0435\u0439")))}),B=function(e){var t=Object(l.useState)("home"),n=Object(T.a)(t,2),r=n[0],a=n[1],c=function(e){return a(e.currentTarget.dataset.to)};return f.a.createElement(A.View,{activePanel:r},f.a.createElement(G,{id:"home",go:c}),f.a.createElement(X,{id:"friends",go:c}))},J=Object(h.e)(S,Object(h.d)(Object(h.a)(_.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));I.a.send("VKWebAppInit",{}),function(){var e=Object(u.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("access_token")){e.next=8;break}return e.next=3,I.a.send("VKWebAppGetAuthToken",{app_id:6940370,scope:"friends"});case 3:return t=e.sent,e.next=6,t.data.access_token;case 6:n=e.sent,localStorage.setItem("access_token",n);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),p.a.render(f.a.createElement(function(){return f.a.createElement(m.a,{store:J},f.a.createElement(B,null))},null),document.getElementById("root"))}},[[152,1,2]]]);
//# sourceMappingURL=main.9bc700b6.chunk.js.map