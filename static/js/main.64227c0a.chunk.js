(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(e,t,n){e.exports=n(362)},362:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"default",function(){return v}),n.d(r,"getUser",function(){return E});var a={};n.r(a),n.d(a,"default",function(){return S}),n.d(a,"getFriends",function(){return k}),n.d(a,"getFriendsInInstagram",function(){return C}),n.d(a,"getBannedFriends",function(){return x}),n.d(a,"getOffsetFriends",function(){return T}),n.d(a,"getOffsetInstagramFriends",function(){return N}),n.d(a,"getOffsetBannedFriends",function(){return B});var s={};n.r(s),n.d(s,"fetchedUser",function(){return Q});var c={};n.r(c),n.d(c,"fetchedAllFriends",function(){return X}),n.d(c,"fetchedFriends",function(){return Z}),n.d(c,"fetchedInstagramFriends",function(){return $}),n.d(c,"fetchedBannedFriends",function(){return ee}),n.d(c,"updateFriends",function(){return te}),n.d(c,"updateInstagramFriends",function(){return ne}),n.d(c,"updateBannedFriends",function(){return re});n(155),n(157);var o=n(0),i=n.n(o),u=n(64),f=n.n(u),d=n(52),l=n(33),p=n(151),h=n(26),m="SET_USER",g={photo_200:"https://pp.userapi.com/c841034/v841034569/3b8c1/pt3sOw_qhfg.jpg",first_name:"\u0412\u0430\u0441\u044f",last_name:"\u0412\u0430\u0441\u0435\u0447\u043a\u0438\u043d",city:{title:"New York"}};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case m:return Object(h.a)({},e,t.payload);default:return e}}var E=function(e){return e.user},F=n(11),b="FETCHED_FRIENDS",O="UPDATE_FRIENDS",_="FETCHED_INSTAGRAM_FRIENDS",j="UPDATE_INSTAGRAM_FRIENDS",w="FETCHED_BANNED_FRIENDS",I="UPDATE_BANNED_FRIENDS",y={users:[],instagramUsers:[],bannedUsers:[],offsetFriends:0,offsetInstagramFriends:0,offsetBannedFriends:0};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case b:return Object(h.a)({},e,{offsetFriends:t.offsetFriends,users:Object(F.a)(t.users)});case O:return Object(h.a)({},e,{offsetFriends:t.offsetFriends,users:[].concat(Object(F.a)(e.users),Object(F.a)(t.users))});case _:return Object(h.a)({},e,{offsetInstagramFriends:t.offsetInstagramFriends,instagramUsers:Object(F.a)(t.users.filter(function(e){return e.instagram}))});case j:return Object(h.a)({},e,{offsetInstagramFriends:t.offsetInstagramFriends,instagramUsers:[].concat(Object(F.a)(e.instagramUsers),Object(F.a)(t.users.filter(function(e){return e.instagram})))});case w:return Object(h.a)({},e,{offsetBannedFriends:t.offsetBannedFriends,bannedUsers:Object(F.a)(t.users.filter(function(e){return"deleted"===e.deactivated||"banned"===e.deactivated}))});case I:return Object(h.a)({},e,{offsetBannedFriends:t.offsetBannedFriends,bannedUsers:[].concat(Object(F.a)(e.bannedUsers),Object(F.a)(t.users.filter(function(e){return"deleted"===e.deactivated||"banned"===e.deactivated})))});default:return e}}var k=function(e){return e.friends.users},C=function(e){return e.friends.instagramUsers},x=function(e){return e.friends.bannedUsers},T=function(e){return e.friends.offsetFriends},N=function(e){return e.friends.offsetInstagramFriends},B=function(e){return e.friends.offsetBannedFriends},D="FETCHED_SEARCH",A={q:[]};var P=Object(d.c)({user:v,friends:S,search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case D:return Object(h.a)({},e,{q:t.search.filter(function(e){return"profile"===e.type})});default:return e}}}),U=n(53),R=n(40),L=n(2),H=(n(359),n(3)),z=n.n(H),G=n(14),M="5.95",V={access_token:"",dateTime:"",scope:""},K=function(){V.access_token="",V.dateTime="",V.scope=""},W=function(){var e=Object(G.a)(z.a.mark(function e(t){var n;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.send("VKWebAppGetAuthToken",{app_id:7080438,scope:t});case 3:return n=e.sent,e.next=6,n.data.access_token;case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(G.a)(z.a.mark(function e(t){var n,r,a,s,c,o;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,1e6,n=Date.now(),r=V.dateTime||Date.now()-1e6+1,a=n-r,s=V.scope!==t,c=!V.oneFetched,!(!localStorage.access_token&&a>1e6)&&!s||!c){e.next=15;break}return e.next=11,W(t);case 11:o=e.sent,V.access_token=o,V.dateTime=n,V.scope=t;case 15:return e.next=17,V.access_token;case 17:return e.abrupt("return",e.sent);case 20:throw e.prev=20,e.t0=e.catch(0),K(),Error(e.t0.message);case 24:case"end":return e.stop()}},e,null,[[0,20]])}));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(G.a)(z.a.mark(function e(){var t;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.send("VKWebAppGetUserInfo",{});case 3:return t=e.sent,e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(G.a)(z.a.mark(function e(){var t,n,r,a,s,c=arguments;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:100,n=c.length>1&&void 0!==c[1]?c[1]:0,e.prev=2,e.next=5,q("friends, groups");case 5:return r=e.sent,"friends.get","connections,deactivated,nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities",a={access_token:r,v:M,fields:"connections,deactivated,nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities",count:t,offset:n},e.next=11,U.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:a});case 11:return s=e.sent,e.next=14,s.data.response.items;case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t0=e.catch(2),K(),Error(e.t0.message);case 21:case"end":return e.stop()}},e,null,[[2,17]])}));return function(){return e.apply(this,arguments)}}(),Q=function(){return function(){var e=Object(G.a)(z.a.mark(function e(t){var n;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:n=e.sent,t({type:m,payload:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},X=function(e){var t=0,n=function(){var r=Object(G.a)(z.a.mark(function r(a){var s;return z.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Y(100,t);case 2:s=r.sent,!!s.length&&t<=5e3&&(console.log("fetchedAllUsers",t),t+=100,n(a),a({type:O,users:Object(F.a)(s),offsetFriends:t}),e&&e());case 5:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}();return n},Z=function(e){var t=0,n=function(){var r=Object(G.a)(z.a.mark(function r(a){var s,c;return z.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Y(100,t);case 2:s=r.sent,c=!s.length,s.length<10&&t<=5e3&&(console.log("FETCHED_FRIENDS",t),t+=100,n(a)),c||(a({type:O,users:Object(F.a)(s),offsetFriends:t}),e&&e());case 6:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}();return n},$=function(e){var t=0,n=function(){var r=Object(G.a)(z.a.mark(function r(a){var s,c,o;return z.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Y(100,t);case 2:s=r.sent,c=s.filter(function(e){return e.instagram}),o=!c.length,c.length<10&&t<=5e3&&(console.log("FETCHED_INSTAGRAM_FRIENDS",t),t+=100,n(a)),o||(a({type:j,users:Object(F.a)(c),offsetInstagramFriends:t}),e&&e());case 7:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}();return n},ee=function(e){var t=0,n=function(){var r=Object(G.a)(z.a.mark(function r(a){var s,c,o;return z.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Y(100,t);case 2:s=r.sent,c=s.filter(function(e){return"deleted"===e.deactivated||"banned"===e.deactivated}),o=!c.length,c.length<10&&t<=5e3&&(console.log("FETCHED_BANNED_FRIENDS",t),t+=100,a({type:I,users:Object(F.a)(c),offsetBannedFriends:t}),n(a)),o||(a({type:I,users:Object(F.a)(c),offsetBannedFriends:t}),e&&e());case 7:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}();return n},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=Object(G.a)(z.a.mark(function t(n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("UPDATE_FRIENDS",e),t.next=3,Y(100,e);case 3:r=t.sent,n({type:O,users:Object(F.a)(r)});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=Object(G.a)(z.a.mark(function t(n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("UPDATE_INSTAGRAM_FRIENDS",e),t.next=3,Y(100,e);case 3:r=t.sent,n({type:j,users:Object(F.a)(r)});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=Object(G.a)(z.a.mark(function t(n){var r,a;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("UPDATE_BANNED_FRIENDS",e),t.next=3,Y(100,e);case 3:r=t.sent,a=e+100,n({type:I,users:Object(F.a)(r),offsetBannedFriends:a});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},ae=n(65),se=n.n(ae),ce=function(e){var t=e.size,n=e.id,r=e.photo_50,a=e.photo_100,s=e.photo_200,c=e.photo_200_orig,o=e.city,u=e.country,f=e.first_name,d=e.last_name,l=(e.bdate,e.description),p=e.instagram,h=function(e){var t=e.id,n=e.type,r=e.instagram;switch(n){case"vk":return"https://vk.com/id".concat(t);case"instagram":return"https://www.instagram.com/".concat(r);default:return"https://vk.com/id".concat(t)}}({id:n,type:e.connections,instagram:p});return i.a.createElement(L.Cell,{key:n,before:i.a.createElement(L.Avatar,{size:t,src:c||s||a||r}),size:"l",description:l||"".concat(o.title," ").concat(u.title),onClick:function(){return function(e){window.location.href=e}(h)}},"".concat(f," ").concat(d))};ce.defaultProps={size:48,city:{title:""},country:{title:""},connections:"vk"};var oe=ce,ie=Object(l.b)(function(e){return{fetchedUser:r.getUser(e)}},null)(function(e){var t=e.id,n=e.go,r=e.fetchedUser,a=e.dispatch,c=Object(o.useState)(!1),u=Object(R.a)(c,2),f=u[0],d=u[1];!function(e){Object(o.useEffect)(function(){e((0,s.fetchedUser)())},[])}(a);return i.a.createElement(L.Panel,{id:t},i.a.createElement(L.PanelHeader,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),i.a.createElement(L.PullToRefresh,{onRefresh:function(){d(!0),setTimeout(function(){d(!1)},2e3)},isFetching:f},i.a.createElement(L.Group,{title:""},i.a.createElement(oe,Object.assign({size:36},r,{go:n}))),i.a.createElement(L.Group,{title:"\u0414\u0440\u0443\u0437\u044c\u044f"},i.a.createElement(L.List,null,i.a.createElement(L.Cell,{onClick:n,"data-to":"friends",asideContent:i.a.createElement(se.a,null)},"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0434\u0440\u0443\u0437\u044c\u044f\u043c"),i.a.createElement(L.Cell,{onClick:n,"data-to":"friendsInInstagram",asideContent:i.a.createElement(se.a,null)},"\u0414\u0440\u0443\u0437\u044c\u044f \u0432 \u0438\u043d\u0441\u0442\u0430\u0433\u0440\u0430\u043c\u043c\u0435"),i.a.createElement(L.Cell,{onClick:n,"data-to":"deletedAndBanned",asideContent:i.a.createElement(se.a,null)},"\u0443\u0434\u0430\u043b\u0451\u043d\u043d\u044b\u0435 / \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435")))))}),ue=n(153),fe=function(e){var t=e.handleScroll,n=e.handleRefresh,r=e.isFetching,a=e.list,s=(e.component,e.footerNameCount),c=e.groupTitle,u=e.children;return i.a.createElement(L.PullToRefresh,{onScroll:t,onRefresh:n,isFetching:r},!a.length&&!r&&i.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},i.a.createElement(L.Spinner,{size:"regular",style:{marginTop:20}})),a.length>0&&i.a.createElement(L.Group,{title:c},a.map(function(e,t){return i.a.createElement(L.List,{key:e.id||t},Object(o.cloneElement)(u,e),i.a.createElement("span",null))})),i.a.createElement(L.Footer,null,a.length," ",s))};fe.defaultProps={handleScroll:function(){}};var de=fe,le=n(152),pe=n.n(le),he=n(111),me=n.n(he),ge=Object(L.platform)(),ve=function(e){var t=e.handelClick,n=e.dataTo,r=e.title;return i.a.createElement(L.PanelHeader,{left:i.a.createElement(L.HeaderButton,{onClick:t,"data-to":n},ge===L.IOS?i.a.createElement(pe.a,null):i.a.createElement(me.a,null))},r)},Ee=function(e){var t=e.go,n=e.usersList,r=e.handleScrollBottom,a=e.handleFetched,s=e.searchFilter,c=e.isSearch,u=e.headerPanelTitle,f=e.footerNameCount,d=Object(ue.a)(e,["go","usersList","handleScrollBottom","handleFetched","searchFilter","isSearch","headerPanelTitle","footerNameCount"]),l=Object(o.useState)(!1),p=Object(R.a)(l,2),h=p[0],m=p[1],g=Object(o.useState)(""),v=Object(R.a)(g,2),E=v[0],F=v[1],b=Object(o.useState)(""),O=Object(R.a)(b,2),_=O[0],j=O[1];Object(o.useEffect)(function(){window.addEventListener("scroll",I),a(w)},[]);var w=function(){return m(!1)},I=function(e){var t=e.target.documentElement.scrollHeight,n=e.target.documentElement.clientHeight;window.pageYOffset+5>=t-n&&r()};return i.a.createElement(i.a.Fragment,null,i.a.createElement(ve,{title:u,handelClick:t,dataTo:"home"}),n.length>0&&c&&i.a.createElement(L.Search,{value:E,onChange:function(e){var t=s(e);F(e),j(t)},onClose:function(){F(""),j("")}}),i.a.createElement(de,{handleScroll:I,handleRefresh:function(){m(!0),a(w)},isFetching:h,list:_.length?_:n,footerNameCount:f},i.a.createElement(oe,Object.assign({size:36,go:t},d))))};Ee.defaultProps={isSearch:!1,searchFilter:function(){},headerPanelTitle:"",footerNameCount:""};var Fe=Ee,be=Object(l.b)(function(e){return{users:a.getFriends(e),offsetFriends:a.getOffsetFriends(e)}},null)(function(e){var t=e.id,n=e.go,r=e.users,a=e.offsetFriends,s=e.dispatch,o=c.updateFriends,u=c.fetchedFriends,f=a;return i.a.createElement(L.Panel,{id:t},i.a.createElement(Fe,{go:n,usersList:r,handleScrollBottom:function(){s(o(f+=100))},handleFetched:function(e){s(u(e))},searchFilter:function(e){return r.filter(function(t){var n=t.first_name,r=t.last_name,a=t.status,s=t.domain;return"".concat(n," ").concat(r," ").concat(s," ").concat(a).toLowerCase().indexOf(e.toLowerCase())>-1})},isSearch:!0,headerPanelTitle:"\u0414\u0440\u0443\u0437\u044c\u044f",footerNameCount:"\u0434\u0440\u0443\u0437\u0435\u0439"}))}),Oe=Object(l.b)(function(e){return{users:a.getFriendsInInstagram(e),getOffsetInstagramFriends:a.getOffsetInstagramFriends(e)}},null)(function(e){var t=e.id,n=e.go,r=e.users,a=e.getOffsetInstagramFriends,s=e.dispatch,o=c.updateInstagramFriends,u=c.fetchedInstagramFriends,f=a;return i.a.createElement(L.Panel,{id:t},i.a.createElement(Fe,{go:n,usersList:r,handleScrollBottom:function(){s(o(f+=100))},handleFetched:function(e){s(u(e))},searchFilter:function(e){return r.filter(function(t){var n=t.first_name,r=t.last_name,a=t.status,s=t.domain;return"".concat(n," ").concat(r," ").concat(s," ").concat(a).toLowerCase().indexOf(e.toLowerCase())>-1})},isSearch:!0,headerPanelTitle:"\u0414\u0440\u0443\u0437\u044c\u044f",footerNameCount:"\u0434\u0440\u0443\u0437\u0435\u0439",connections:"instagram"}))}),_e=Object(l.b)(function(e){return{users:a.getBannedFriends(e),getOffsetBannedFriends:a.getOffsetBannedFriends(e)}},null)(function(e){var t=e.id,n=e.go,r=e.users,a=e.getOffsetBannedFriends,s=e.dispatch,o=c.fetchedBannedFriends,u=c.updateBannedFriends;return i.a.createElement(L.Panel,{id:t},i.a.createElement(Fe,{go:n,usersList:r,handleScrollBottom:function(){s(u(a))},handleFetched:function(e){s(o(e))},searchFilter:function(e){return r.filter(function(t){var n=t.first_name,r=t.last_name,a=t.status,s=t.domain;return"".concat(n," ").concat(r," ").concat(s," ").concat(a).toLowerCase().indexOf(e.toLowerCase())>-1})},isSearch:!0,headerPanelTitle:"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435/\u0417\u0430\u0431\u0430\u043d\u0435\u043d\u043d\u044b\u0435",footerNameCount:"\u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0445 \u0438 \u0437\u0430\u0431\u0435\u043d\u043d\u044b\u0445"}))}),je=function(e){var t=Object(o.useState)("home"),n=Object(R.a)(t,2),r=n[0],a=n[1],s=function(e){return a(e.currentTarget.dataset.to)};return i.a.createElement(L.View,{activePanel:r},i.a.createElement(ie,{id:"home",go:s}),i.a.createElement(be,{id:"friends",go:s}),i.a.createElement(Oe,{id:"friendsInInstagram",go:s}),i.a.createElement(_e,{id:"deletedAndBanned",go:s}))},we=Object(d.d)(P,Object(d.a)(p.a));U.a.send("VKWebAppInit",{}),f.a.render(i.a.createElement(function(){return i.a.createElement(l.a,{store:we},i.a.createElement(je,null))},null),document.getElementById("root"))}},[[154,1,2]]]);
//# sourceMappingURL=main.64227c0a.chunk.js.map