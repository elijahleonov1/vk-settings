{"version":3,"sources":["store/user/actionType.js","store/user/reducer.js","store/friends/actionType.js","store/friends/reducer.js","store/search/actionType.js","store/search/reducer.js","store/stories/actionType.js","store/stories/reducer.js","store/reducers.js","utils/api/vk.js","store/user/action.js","store/friends/action.js","store/stories/action.js","components/User.js","containers/Home.js","components/RefreshList.js","components/HeaderPanel.js","containers/UsersList.js","containers/Friends/Friends.js","containers/Friends/Instagram.js","containers/Friends/BannedFriends.js","containers/Friends/SortLongTime.js","components/Story/Story.js","containers/Stories/Stories.js","containers/Stories/UserStory.js","components/ScreenSpinner/ScreenSpinner.js","containers/Diagram/City.js","App.js","index.js"],"names":["SET_USER","GET_USERS_PROFILE","userInitialState","user","photo_200","first_name","last_name","city","title","profile","users","state","arguments","length","undefined","action","type","Object","objectSpread","payload","toConsumableArray","getUser","getUsersProfile","FETCHED_FRIENDS","UPDATE_FRIENDS","friends","offsetFriends","concat","getFriends","getFriendsInInstagram","filter","instagram","getBannedFriends","deactivated","getSortLongTime","sort","a","b","last_seen","time","getSortFriendsFromCity","friendsSort","values","map","friend","value","items","name","push","id","FETCHED_SEARCH","initialState","q","FETCHED_STORIES","FETCHED_USER_STORIES","profiles","userStoreis","stories","item","_ref","owner_id","getStories","getProfiles","combineReducers","search","v","initStore","access_token","dateTime","scope","clearStorage","fetchedAccessToken","asyncToGenerator","regenerator_default","mark","_callee","response","wrap","_context","prev","next","connect","send","app_id","sent","data","console","log","abrupt","t0","Error","message","stop","_x","apply","this","getAccessToken","_ref2","_callee2","newTime","oldTime","diffTime","updateScope","oneFetched","_context2","Date","now","localStorage","_x2","_ref4","_callee3","_ref3","_ref3$user_ids","user_ids","_ref3$name_case","name_case","params","_response","_context3","fields","method","_x3","_ref5","_callee4","count","offset","_args4","_context4","fetchedStories","_ref9","_callee6","_ref8","_ref8$extended","extended","_context6","_x5","fetchedUser","dispatch","fetchedUsersProfile","fetchedAllFriends","setFetching","ending","fetched","isVoidData","fetchedFriends","updateFriends","fetcheStories","fetcheUserStories","descriptions","longTime","description","country","date","toLocaleDateString","toLocaleTimeString","slice","formatDateTime","User","size","photo_50","photo_100","photo_200_orig","bdate","connections","otherProps","objectWithoutProperties","url","connectionsType","des","react_default","createElement","vkui","key","before","src","onClick","window","location","href","openUrl","defaultProps","selectUser","props","go","_useState","useState","_useState2","slicedToArray","isFetching","setIsFetching","useEffect","userActions","useFetchedUser","onRefresh","setTimeout","components_User","assign","data-to","asideContent","chevron_default","RefreshList","handleScroll","handleRefresh","list","footerNameCount","component","groupTitle","children","onScroll","style","display","alignItems","flexDirection","marginTop","cloneElement","osname","platform","HeaderPanel","handelClick","dataTo","left","IOS","chevron_back_default","back_default","UsersList","usersList","handleScrollBottom","handleFetched","searchFilter","isSearch","headerPanelTitle","_useState3","_useState4","setSearch","_useState5","_useState6","userSearch","setUserSearch","addEventListener","e","scrollHeight","target","documentElement","clientHeight","pageYOffset","Fragment","components_HeaderPanel","onChange","searchUsers","onClose","components_RefreshList","selectFriends","frendsActions","containers_UsersList","status","domain","toLowerCase","indexOf","getOffsetInstagramFriends","getOffsetBannedFriends","Story","_ref$size","_ref$name","_ref$photo","photo","handleClick","className","selectStories","usersProfile","setUserStoryId","storiesActions","userIds","to","components_Story_Story","userStoryId","getPhoto","video","photo_130","sizes","others","open","baseClassName","getClassName","ScreenSpinner","esm_extends","classNames","COLORS","top","lineHeight","renderCustomizedLabel","cx","cy","midAngle","innerRadius","outerRadius","RADIAN","percent","index","Math","PI","radius","x","cos","y","sin","fill","textAnchor","dominantBaseline","City","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","screenSpinner","_this$props","bind","setState","_this$props2","components_ScreenSpinner_ScreenSpinner","es6","width","height","onMouseEnter","onPieEnter","dataKey","labelLine","label","entry","iconSize","iconType","layout","verticalAlign","wrapperStyle","Component","App","activePanel","setActivePanel","currentTarget","dataset","containers_Home","containers_Friends_Friends","Instagram","Friends_BannedFriends","Friends_SortLongTime","Diagram_City","containers_Stories_Stories","Stories_UserStory","store","createStore","rootReducer","applyMiddleware","thunk","ReactDOM","render","es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.e9330326.chunk.js","sourcesContent":["export const SET_USER = 'SET_USER';\r\nexport const GET_USERS_PROFILE = 'GET_USERS_PROFILE';","import { SET_USER, GET_USERS_PROFILE } from './actionType';\r\n\r\nconst userInitialState = {\r\n\tuser: {\r\n\t\tphoto_200: 'https://pp.userapi.com/c841034/v841034569/3b8c1/pt3sOw_qhfg.jpg',\r\n\t\tfirst_name: 'Вася',\r\n\t\tlast_name: 'Васечкин',\r\n\t\tcity: { title: 'New York' }\r\n\t},\r\n\tprofile: []\r\n};\r\n\r\nexport default function users (state = userInitialState, action = {}) {\r\n\tswitch (action.type) {\r\n\t\tcase SET_USER:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuser: {...action.payload}\r\n\t\t\t};\r\n\t\tcase GET_USERS_PROFILE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tprofile: [...action.payload]\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t};\r\n};\r\n\r\nexport const getUser = (state) => {\r\n\treturn state.user.user;\r\n};\r\n\r\nexport const getUsersProfile = (state) => {\r\n\treturn state.user.profile;\r\n};","export const FETCHED_FRIENDS = 'FETCHED_FRIENDS';\r\nexport const FETCHED_ALL_FRIENDS = 'FETCHED_ALL_FRIENDS';\r\nexport const UPDATE_FRIENDS = 'UPDATE_FRIENDS';\r\nexport const FETCHED_INSTAGRAM_FRIENDS = 'FETCHED_INSTAGRAM_FRIENDS';\r\nexport const UPDATE_INSTAGRAM_FRIENDS = 'UPDATE_INSTAGRAM_FRIENDS';\r\nexport const FETCHED_BANNED_FRIENDS = 'FETCHED_BANNED_FRIENDS';\r\nexport const UPDATE_BANNED_FRIENDS = 'UPDATE_BANNED_FRIENDS';","import {\r\n\tFETCHED_FRIENDS,\r\n\tUPDATE_FRIENDS\r\n} from './actionType';\r\n\r\nconst userInitialState = {\r\n\tusers: []\r\n};\r\n\r\n\r\nexport default function friends (state = userInitialState, action = {}) {\r\n\tswitch (action.type) {\r\n\t\tcase FETCHED_FRIENDS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\toffsetFriends: action.offsetFriends,\r\n\t\t\t\tusers: [...action.users],\r\n\t\t\t};\r\n\t\tcase UPDATE_FRIENDS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\toffsetFriends: action.offsetFriends,\r\n\t\t\t\tusers: [...state.users, ...action.users],\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t};\r\n};\r\n\r\nexport const getFriends = (state) => state.friends.users;\r\nexport const getFriendsInInstagram = (state) => state.friends.users.filter(user => user.instagram);\r\nexport const getBannedFriends = (state) => state.friends.users.filter(user => user.deactivated === 'deleted' || user.deactivated === 'banned');\r\nexport const getSortLongTime = (state) => {\r\n\treturn state.friends.users.sort((a,b) => {\r\n\t\treturn \ta.last_seen &&\r\n\t\t\t\tb.last_seen &&\r\n\t\t\t\ta.last_seen.time &&\r\n\t\t\t\tb.last_seen.time && (a.last_seen.time - b.last_seen.time)\r\n\t});\r\n};\r\n\r\nexport const getSortFriendsFromCity = (state) => {\r\n\tconst friends = (users=[]) => {\r\n\t\tconst friends = {};\r\n\t\tusers.map((friend) => {\r\n\t\t\tif (friend.city){\r\n\t\t\t\tif (friends[friend.city.id]) {\r\n\t\t\t\t\tfriends[friend.city.id].value += 1;\r\n\t\t\t\t\tfriends[friend.city.id].name = friend.city.title;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfriends[friend.city.id] = {\r\n\t\t\t\t\t\tid: friend.city.id,\r\n\t\t\t\t\t\tname: `${friend.city.title}`,\r\n\t\t\t\t\t\tvalue: 1\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn friends;\r\n\t};\r\n\tconst friendsSort = (users={}) => {\r\n\t\tconst friendsSort = {};\r\n\t\tObject.values(users).map((friend) => {\r\n\t\t\tif (friend.value < 10) {\r\n\t\t\t\tif (!friendsSort['others']){\r\n\t\t\t\t\tfriendsSort['others'] = {\r\n\t\t\t\t\t\tvalue: 0,\r\n\t\t\t\t\t\titems: [],\r\n\t\t\t\t\t\tname: ''\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tfriendsSort['others'].items.push(friend);\r\n\t\t\t\tfriendsSort['others'].value += 1;\r\n\t\t\t\tfriendsSort['others'].name = `others - ${friendsSort['others'].value}`;\r\n\t\t\t} else {\r\n\t\t\t\tif (!friendsSort[friend.id]) {\r\n\t\t\t\t\tfriendsSort[friend.id] = {\r\n\t\t\t\t\t\tvalue: 0,\r\n\t\t\t\t\t\titems: [],\r\n\t\t\t\t\t\tname: ''\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tfriendsSort[friend.id].items.push(friend);\r\n\t\t\t\tfriendsSort[friend.id].value += friend.value;\r\n\t\t\t\tfriendsSort[friend.id].name = `${friend.name} - ${friendsSort[friend.id].value}`;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn Object.values(friendsSort).sort((a,b) => b.value - a.value);\r\n\t};\r\n\treturn friendsSort(friends(state.friends.users));\r\n};","export const FETCHED_SEARCH = 'FETCHED_SEARCH';","import {FETCHED_SEARCH} from './actionType';\r\n\r\nconst initialState = {\r\n\tq: []\r\n};\r\n\r\nexport default function search (state=initialState, action={}) {\r\n\tswitch(action.type) {\r\n\t\tcase FETCHED_SEARCH:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tq: action.search.filter(q => q.type === 'profile')\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport const getSearch = (state) => {\r\n\treturn state.search.q;\r\n};","export const FETCHED_STORIES = 'FETCHED_STORIES';\r\nexport const FETCHED_USER_STORIES = 'FETCHED_USER_STORIES';","import {FETCHED_STORIES, FETCHED_USER_STORIES} from './actionType';\r\n\r\nconst initialState = {\r\n\titems: [],\r\n\tprofiles: [],\r\n\tuserStoreis: []\r\n};\r\n\r\nexport default function stories (state=initialState, action={}) {\r\n\tswitch(action.type) {\r\n\t\tcase FETCHED_STORIES:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\titems: [...action.items],\r\n\t\t\t\tprofiles: [...action.profiles]\r\n\t\t\t};\r\n\t\tcase FETCHED_USER_STORIES:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tuserStoreis: state.items.filter((item) =>\r\n\t\t\t\t\titem.filter(({owner_id}) => owner_id === action.id).length > 0 )\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport const getStories = (state) => {\r\n\treturn state.stories.items;\r\n};\r\n\r\nexport const getProfiles = (state) => {\r\n\treturn state.stories.profiles;\r\n};\r\n\r\nexport const userStoreis = (state) => {\r\n\treturn state.stories.userStoreis[0];\r\n};","import {combineReducers} from 'redux';\r\nimport user, * as selectUser from './user/reducer';\r\nimport friends, * as selectFriends from './friends/reducer';\r\nimport search, * as selectSearch from './search/reducer';\r\nimport stories, * as selectStories from './stories/reducer';\r\n\r\nexport default combineReducers({\r\n\tuser,\r\n\tfriends,\r\n\tsearch,\r\n\tstories\r\n});\r\n\r\nexport {\r\n\tselectUser,\r\n\tselectFriends,\r\n\tselectSearch,\r\n\tselectStories\r\n}","import connect from '@vkontakte/vkui-connect-promise';\r\n\r\nconst v = '5.95';\r\nconst app_id = 7080438;\r\n\r\nconst initStore = {\r\n\taccess_token: '',\r\n\tdateTime: '',\r\n\tscope: ''\r\n};\r\n\r\nconst clearStorage = () => {\r\n\tinitStore.access_token = '';\r\n\tinitStore.dateTime = '';\r\n\tinitStore.scope = '';\r\n};\r\n\r\nconst fetchedAccessToken = async (scope) => {\r\n\ttry {\r\n\t\tconst response = await connect.send('VKWebAppGetAuthToken', {app_id, scope});\r\n\t\tconst access_token = await response.data.access_token;\r\n\t\tconsole.log('access_token', access_token);\r\n\t\treturn access_token;\r\n\t} catch (err) {\r\n\t\tthrow Error(err.message);\r\n\t}\r\n};\r\n\r\nconst getAccessToken = async (scope) => {\r\n\ttry {\r\n\t\tconst resTime = 1000000;\r\n\t\tconst newTime = Date.now();\r\n\t\tconst oldTime = initStore.dateTime || (Date.now() - resTime + 1);\r\n\t\tconst diffTime = newTime - oldTime;\r\n\t\tconst updateScope = initStore.scope !== scope;\r\n\t\tconst oneFetched = !initStore.oneFetched;\r\n\t\tconst isTimeRunUot = (!localStorage.access_token && diffTime > resTime);\r\n\r\n\t\tif ((isTimeRunUot || updateScope) && oneFetched) {\r\n\t\t\tconst access_token = await fetchedAccessToken(scope);\r\n\t\t\tinitStore.access_token = access_token;\r\n\t\t\tinitStore.dateTime = newTime;\r\n\t\t\tinitStore.scope += ' ' + scope;\r\n\t\t}\r\n\t\treturn await initStore.access_token;\r\n\t} catch (err) {\r\n\t\tclearStorage();\r\n\t\tthrow Error(err.message);\r\n\t}\r\n};\r\n\r\nexport const getUser = async ({user_ids=[], name_case='nom'}) => {\r\n\ttry{\r\n\t\tif (!user_ids.length) {\r\n\t\t\tconst response = await connect.send('VKWebAppGetUserInfo', {});\r\n\t\t\tconsole.log('response1', response);\r\n\t\t\treturn await response.data;\r\n\t\t} else {\r\n\t\t\tconst access_token = await getAccessToken('');\r\n\t\t\tconst method = 'users.get';\r\n\t\t\tconst fields = 'connections,deactivated,nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities';\r\n\t\t\tconst params = {access_token, v, user_ids, fields, name_case};\r\n\t\t\tconst response =await connect.send('VKWebAppCallAPIMethod', {method, params});\r\n\t\t\tconsole.log('response2', response);\r\n\t\t\treturn await response.data;\r\n\t\t}\r\n\t} catch(err) {\r\n\t\tclearStorage();\r\n\t\tthrow Error(err.message);\r\n\t}\r\n};\r\n\r\nexport const getFriends = async (count=100, offset=0) => {\r\n\ttry{\r\n\t\tconst access_token = await getAccessToken('friends, groups');\r\n\t\tconst method = 'friends.get';\r\n\t\tconst fields = 'connections,deactivated,nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities';\r\n\t\tconst params = {access_token, v, fields, count, offset};\r\n\t\tconst response = await connect.send('VKWebAppCallAPIMethod', {method, params});\r\n\t\treturn await response.data.response.items;\r\n\t} catch (err) {\r\n\t\tclearStorage();\r\n\t\tthrow Error(err.message);\r\n\t}\r\n};\r\n\r\nexport const fetchedSearch = async ({q='', offset=0, limit=10, filters='', fields='', search_global=1}) => {\r\n\ttry{\r\n\t\tconst access_token = await getAccessToken('friends, groups');\r\n\t\tconst method = 'search.getHints';\r\n\t\tconst params = { access_token, v, q, offset, limit, filters, search_global };\r\n\t\tconst response = await connect.send('VKWebAppCallAPIMethod', {method, params});\r\n\t\treturn await response.data.response.items;\r\n\t} catch (err) {\r\n\t\tclearStorage();\r\n\t\tthrow Error(err.message);\r\n\t}\r\n};\r\n\r\nexport const fetchedStories = async ({extended=0}) => {\r\n\ttry{\r\n\t\tconst access_token = await getAccessToken('stories');\r\n\t\tconst method = 'stories.get';\r\n\t\tconst params = { access_token, v, extended };\r\n\t\tconst response = await connect.send('VKWebAppCallAPIMethod', {method, params});\r\n\t\treturn await response.data.response;\r\n\t} catch (err) {\r\n\t\tclearStorage();\r\n\t\tthrow Error(err.message);\r\n\t}\r\n};","import {SET_USER, GET_USERS_PROFILE} from './actionType';\r\nimport {getUser} from '../../utils/api/vk';\r\n\r\nexport const fetchedUser = () => async (dispatch) => {\r\n\tconst data = await getUser({});\r\n\tdispatch({type: SET_USER, payload: data});\r\n};\r\n\r\nexport const fetchedUsersProfile = ({user_ids}) => async (dispatch) => {\r\n\tconst {response} = await getUser({user_ids});\r\n\tdispatch({type: GET_USERS_PROFILE, payload: response});\r\n};","import {\r\n\tFETCHED_FRIENDS,\r\n\tUPDATE_FRIENDS\r\n} from './actionType';\r\nimport {getFriends} from '../../utils/api/vk';\r\n\r\nexport const fetchedAllFriends = (setFetching, ending) => {\r\n\tlet offset = 0;\r\n\tconst fetched = async (dispatch) => {\r\n\t\tconst data = await getFriends(100, offset);\r\n\t\tconst isVoidData = !data.length;\r\n\t\tif (!isVoidData && offset <= 5000) {\r\n\t\t\tconsole.log('fetchedAllUsers', offset);\r\n\t\t\toffset += 100;\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: UPDATE_FRIENDS,\r\n\t\t\t\tusers: [...data],\r\n\t\t\t\toffsetFriends: offset\r\n\t\t\t});\r\n\t\t\tfetched(dispatch);\r\n\t\t}\r\n\t\tif (isVoidData && ending) {\r\n\t\t\tending();\r\n\t\t}\r\n\t\tif (setFetching) {\r\n\t\t\tsetFetching();\r\n\t\t}\r\n\t};\r\n\treturn fetched;\r\n};\r\n\r\nexport const fetchedFriends = (setFetching) => {\r\n\tlet offset = 0;\r\n\treturn async (dispatch) => {\r\n\t\tconst data = await getFriends(100, offset);\r\n\t\tdispatch({type: FETCHED_FRIENDS, users: [...data]});\r\n\t\tsetFetching && setFetching();\r\n\t};\r\n};\r\n\r\nexport const updateFriends = (offset=0) => async (dispatch) => {\r\n\tconsole.log('UPDATE_FRIENDS', offset);\r\n\tconst data = await getFriends(100, offset);\r\n\tdispatch({type: UPDATE_FRIENDS, users: [...data]});\r\n};","import {FETCHED_STORIES, FETCHED_USER_STORIES} from './actionType';\r\nimport {fetchedStories} from '../../utils/api/vk';\r\n\r\nexport const fetcheStories = (extended) => async (dispatch) => {\r\n\tconst stories = await fetchedStories({extended});\r\n\tdispatch({\r\n\t\ttype: FETCHED_STORIES,\r\n\t\titems: [...stories.items],\r\n\t\tprofiles: [...stories.profiles]\r\n\t});\r\n};\r\n\r\nexport const fetcheUserStories = (id) => async (dispatch) => {\r\n\tdispatch({type: FETCHED_USER_STORIES, id});\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Cell,Avatar} from '@vkontakte/vkui';\r\n\r\nconst INSTAGRAM = 'instagram';\r\nconst VK = 'vk';\r\n\r\nconst connectionsType = ({id, type, instagram}) => {\r\n\tswitch(type) {\r\n\t\tcase VK: return `https://vk.com/id${id}`;\r\n\t\tcase INSTAGRAM: return `https://www.instagram.com/${instagram}`;\r\n\t\tdefault: return `https://vk.com/id${id}`;\r\n\t}\r\n};\r\n\r\nconst openUrl = (url) => {\r\n\twindow.location.href = url;\r\n};\r\n\r\nconst formatDateTime = (last_seen) => {\r\n\tconst dateTime = new Date(last_seen * 1000);\r\n\tconst date = dateTime.toLocaleDateString();\r\n\tconst time = dateTime.toLocaleTimeString().slice(0,5);\r\n\treturn `${time} ${date}`;\r\n};\r\n\r\nconst descriptions = ({last_seen, longTime, description, city, country}) => {\r\n\tif (longTime &&\r\n\t\t!!last_seen &&\r\n\t\t!!last_seen.time) {\r\n\t\treturn `был в сети ${formatDateTime(last_seen.time)}`;\r\n\t}\r\n\treturn description || `${city.title} ${country.title}`;\r\n};\r\n\r\nconst  User = ({\r\n\tsize,\r\n\tid,\r\n\tphoto_50,\r\n\tphoto_100,\r\n\tphoto_200,\r\n\tphoto_200_orig,\r\n\tcity,\r\n\tcountry,\r\n\tfirst_name,\r\n\tlast_name,\r\n\tbdate,\r\n\tdescription,\r\n\tinstagram,\r\n\tconnections,\r\n\t...otherProps\r\n}) => {\r\n\tconst url = connectionsType({ id, type: connections, instagram });\r\n\tconst des = descriptions({ last_seen: otherProps.last_seen, longTime: otherProps.longTime, description, city, country });\r\n\treturn (\r\n\t\t<Cell\r\n\t\t\tkey={id}\r\n\t\t\tbefore={<Avatar\r\n\t\t\t\t\tsize={size}\r\n\t\t\t\t\tsrc={photo_200_orig || photo_200 || photo_100 || photo_50} />}\r\n\t\t\tsize=\"l\"\r\n\t\t\tdescription={des}\r\n\t\t\tonClick={() => openUrl(url)}\r\n\t\t>\r\n\t\t\t{`${first_name} ${last_name}`}\r\n\t\t</Cell>\r\n\t);\r\n}\r\n\r\nUser.propTypes = {\r\n\tid: PropTypes.number,\r\n\tsize: PropTypes.number,\r\n\tphoto_50: PropTypes.string,\r\n\tphoto_100: PropTypes.string,\r\n\tphoto_200: PropTypes.string,\r\n\tphoto_200_orig: PropTypes.string,\r\n\tfirst_name: PropTypes.string,\r\n\tlast_name: PropTypes.string,\r\n\tbdate: PropTypes.string,\r\n\tdescription: PropTypes.string,\r\n\tconnections: PropTypes.string,\r\n\tinstagram: PropTypes.string,\r\n\tcity: PropTypes.shape({title: PropTypes.string}),\r\n\tcountry: PropTypes.shape({title: PropTypes.string})\r\n};\r\n\r\nUser.defaultProps = {\r\n\tsize: 48,\r\n\tcity: {title: ''},\r\n\tcountry: {title: ''},\r\n\tconnections: 'vk'\r\n};\r\n\r\nexport default User;","import React, {useEffect, useState} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {selectUser} from '../store/reducers';\r\nimport {userActions} from '../store/actions';\r\n\r\nimport {Panel, List, Group, PanelHeader, Cell, PullToRefresh} from '@vkontakte/vkui';\r\nimport Icon24Chevron from '@vkontakte/icons/dist/24/chevron';\r\n\r\nimport User from '../components/User';\r\n\r\nconst useFetchedUser = (dispatch) => {\r\n\tuseEffect(() => {\r\n\t\tconst {fetchedUser} = userActions;\r\n\t\tdispatch(fetchedUser());\r\n\t}, []);\r\n};\r\n\r\nconst Home = (props) => {\r\n\tconst {id, go, fetchedUser, dispatch} = props;\r\n\tconst [isFetching, setIsFetching] = useState(false);\r\n\tuseFetchedUser(dispatch);\r\n\r\n\tconst onRefresh = () => {\r\n\t\tsetIsFetching(true);\r\n\t\tsetTimeout(() => {\r\n\t\t\tsetIsFetching(false);\r\n\t\t}, 2000);\r\n\t};\r\n\r\n\treturn(\r\n\t\t<Panel id={id}>\r\n\t\t\t<PanelHeader>Главная</PanelHeader>\r\n\t\t\t\r\n\t\t\t<PullToRefresh\r\n\t\t\t\tonRefresh={onRefresh}\r\n\t\t\t\tisFetching={isFetching}>\r\n\t\t\t\t<Group title=\"\">\r\n\t\t\t\t\t<User size={36} {...fetchedUser} go={go} />\r\n\t\t\t\t</Group>\r\n\r\n\t\t\t\t<Group title=\"Друзья\">\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t<Cell\r\n\t\t\t\t\t\t\tonClick={go}\r\n\t\t\t\t\t\t\tdata-to='friends'\r\n\t\t\t\t\t\t\tasideContent={<Icon24Chevron />}\r\n\t\t\t\t\t\t>Поиск по друзьям</Cell>\r\n\t\t\t\t\t\t<Cell\r\n\t\t\t\t\t\t\tonClick={go}\r\n\t\t\t\t\t\t\tdata-to='friendsInInstagram'\r\n\t\t\t\t\t\t\tasideContent={<Icon24Chevron />}\r\n\t\t\t\t\t\t>Друзья в инстаграмме</Cell>\r\n\t\t\t\t\t\t<Cell\r\n\t\t\t\t\t\t\tonClick={go}\r\n\t\t\t\t\t\t\tdata-to='deletedAndBanned'\r\n\t\t\t\t\t\t\tasideContent={<Icon24Chevron />}\r\n\t\t\t\t\t\t>удалённые / заданные</Cell>\r\n\t\t\t\t\t\t<Cell\r\n\t\t\t\t\t\t\tonClick={go}\r\n\t\t\t\t\t\t\tdata-to='sortlongtime'\r\n\t\t\t\t\t\t\tasideContent={<Icon24Chevron />}\r\n\t\t\t\t\t\t>кто давно заходил?</Cell>\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Group>\r\n\t\t\t\t<Group title=\"Статистика\">\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t<Cell\r\n\t\t\t\t\t\t\tonClick={go}\r\n\t\t\t\t\t\t\tdata-to='city'\r\n\t\t\t\t\t\t\tasideContent={<Icon24Chevron />}\r\n\t\t\t\t\t\t>Города</Cell>\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Group>\r\n\t\t\t\t<Group title=\"Истории\">\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t<Cell\r\n\t\t\t\t\t\t\tonClick={go}\r\n\t\t\t\t\t\t\tdata-to='stories'\r\n\t\t\t\t\t\t\tasideContent={<Icon24Chevron />}\r\n\t\t\t\t\t\t>Истории</Cell>\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Group>\r\n\t\t\t</PullToRefresh>\r\n\t\t</Panel>\r\n\t);\r\n}\r\n\r\nHome.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tfetchedUser: selectUser.getUser(state)\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(Home);\r\n","import React, {cloneElement} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Footer,PullToRefresh,Group,List,Spinner} from '@vkontakte/vkui';\r\n\r\nconst RefreshList = ({\r\n\thandleScroll,\r\n\thandleRefresh,\r\n\tisFetching,\r\n\tlist,\r\n\tcomponent,\r\n\tfooterNameCount,\r\n\tgroupTitle,\r\n\tchildren\r\n}) => {\r\n\t\r\n\treturn(\r\n\t\t<PullToRefresh\r\n\t\t\tonScroll={handleScroll}\r\n\t\t\tonRefresh={handleRefresh}\r\n\t\t\tisFetching={isFetching}>\r\n\t\t\t{!list.length && !isFetching && <div style={{ display: 'flex', alignItems: 'center', flexDirection: 'column' }}>\r\n\t\t\t\t<Spinner size=\"regular\" style={{ marginTop: 20 }} />\r\n\t\t\t</div>}\r\n\t\t\t{list.length > 0 && <Group title={groupTitle}>\r\n\t\t\t\t{list.map((item, key) => (\r\n\t\t\t\t\t<List key={item.id || key}>\r\n\t\t\t\t\t\t{cloneElement(children, item)}\r\n\t\t\t\t\t\t<span></span>\r\n\t\t\t\t\t</List>\r\n\t\t\t\t))}\r\n\t\t\t</Group>}\r\n\t\t\t<Footer>{list.length} {footerNameCount}</Footer>\r\n\t\t</PullToRefresh>\r\n\t);\r\n}\r\n\r\nRefreshList.propTypes = {\r\n\thandleScroll: PropTypes.func,\r\n\thandleRefresh: PropTypes.func.isRequired,\r\n\tisFetching: PropTypes.bool.isRequired,\r\n\tlist: PropTypes.array.isRequired,\r\n\tgroupTitle: PropTypes.string,\r\n\tfooterNameCount: PropTypes.string,\r\n};\r\n\r\nRefreshList.defaultProps = {\r\n\thandleScroll: () => {},\r\n};\r\n\r\nexport default RefreshList;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {\r\n\tPanelHeader,\r\n\tHeaderButton,\r\n\tplatform,\r\n\tIOS\r\n} from '@vkontakte/vkui';\r\n\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\n\r\nconst osname = platform();\r\n\r\nconst HeaderPanel = ({\r\n\thandelClick,\r\n\tdataTo,\r\n\ttitle\r\n}) => {\r\n\treturn (\r\n\t\t<PanelHeader\r\n\t\t\tleft={<HeaderButton onClick={handelClick} data-to={dataTo}>\r\n\t\t\t\t{osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n\t\t\t</HeaderButton>}\r\n\t\t>{title}</PanelHeader>\r\n\t);\r\n}\r\n\r\nHeaderPanel.propTypes = {\r\n\thandelClick: PropTypes.func.isRequired,\r\n\tdataTo: PropTypes.string.isRequired,\r\n\ttitle: PropTypes.string\r\n};\r\n\r\nexport default HeaderPanel;","import React, {useState, useEffect} from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {Search} from '@vkontakte/vkui';\r\n\r\nimport User from '../components/User';\r\nimport RefreshList from '../components/RefreshList';\r\nimport HeaderPanel from '../components/HeaderPanel';\r\n\r\nconst UsersList = ({\r\n\tgo,\r\n\tusersList,\r\n\thandleScrollBottom,\r\n\thandleFetched,\r\n\r\n\tsearchFilter,\r\n\tisSearch,\r\n\r\n\theaderPanelTitle,\r\n\tfooterNameCount,\r\n\r\n\t...otherProps\r\n}) => {\r\n\tconst [isFetching, setIsFetching] = useState(false);\r\n\tconst [search, setSearch] = useState('');\r\n\tconst [userSearch, setUserSearch] = useState('');\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener('scroll', handleScroll);\r\n\t\thandleFetched(setFetching);\r\n\t}, []);\r\n\r\n\tconst onRefresh = () => {\r\n\t\tsetIsFetching(true);\r\n\t\thandleFetched(setFetching);\r\n\t};\r\n\r\n\tconst setFetching = () => setIsFetching(false);\r\n\r\n\tconst handleScroll = (e) => {\r\n\t\tconst scrollHeight = e.target.documentElement.scrollHeight;\r\n\t\tconst clientHeight = e.target.documentElement.clientHeight;\r\n\t\tconst scrollY = window.pageYOffset + 5;\r\n\t\tif (scrollY >= scrollHeight - clientHeight) {\r\n\t\t\thandleScrollBottom();\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSearch = (search) => {\r\n\t\tconst searchUsers = searchFilter(search);\r\n\t\tsetSearch(search);\r\n\t\tsetUserSearch(searchUsers);\r\n\t};\r\n\r\n\tconst handelCloseSearch = () => {\r\n\t\tsetSearch('');\r\n\t\tsetUserSearch('');\r\n\t};\r\n\r\n\treturn(\r\n\t\t<>\r\n\t\t\t<HeaderPanel title={headerPanelTitle} handelClick={go} dataTo='home' />\r\n\t\t\t{usersList.length > 0 && isSearch && <Search value={search} onChange={handleSearch} onClose={handelCloseSearch}/>}\r\n\t\t\t<RefreshList\r\n\t\t\t\thandleScroll={handleScroll}\r\n\t\t\t\thandleRefresh={onRefresh}\r\n\t\t\t\tisFetching={isFetching}\r\n\t\t\t\tlist={!userSearch.length ? usersList : userSearch}\r\n\t\t\t\tfooterNameCount={footerNameCount}\r\n\t\t\t>\r\n\t\t\t\t<User size={36} go={go} {...otherProps} />\r\n\t\t\t</RefreshList>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nUsersList.propTypes = {\r\n\tgo: PropTypes.func.isRequired,\r\n\tusersList: PropTypes.array.isRequired,\r\n\thandleScrollBottom: PropTypes.func.isRequired,\r\n\thandleFetched: PropTypes.func.isRequired,\r\n\r\n\tsearchFilter: PropTypes.func,\r\n\tisSearch: PropTypes.bool,\r\n\r\n\theaderPanelTitle: PropTypes.string,\r\n\tfooterNameCount: PropTypes.string,\r\n};\r\n\r\nUsersList.defaultProps = {\r\n\tisSearch: false,\r\n\tsearchFilter: () => {},\r\n\theaderPanelTitle: '',\r\n\tfooterNameCount: ''\r\n};\r\n\r\nexport default UsersList;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {selectFriends} from '../../store/reducers';\r\nimport {frendsActions} from '../../store/actions';\r\n\r\nimport {Panel} from '@vkontakte/vkui';\r\n\r\nimport UsersList from '../UsersList';\r\n\r\nconst Friends = ({id, go, users, offsetFriends, dispatch}) => {\r\n\tconst {fetchedAllFriends} = frendsActions;\r\n\r\n\tconst handleSearch = (search) => {\r\n\t\treturn users.filter(({first_name, last_name, status, domain}) => {\r\n\t\t\tconst q = `${first_name} ${last_name} ${domain} ${status}`.toLowerCase();\r\n\t\t\treturn q.indexOf(search.toLowerCase()) > -1;\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleScroll = () => {\r\n\t};\r\n\r\n\tconst handleFetched = (setFetching) => {\r\n\t\tif (!users.length){\r\n\t\t\tdispatch(fetchedAllFriends(setFetching));\r\n\t\t}\r\n\t}\r\n\r\n\treturn(\r\n\t\t<Panel id={id}>\r\n\t\t\t<UsersList\r\n\t\t\t\tgo={go}\r\n\t\t\t\tusersList={users.slice(0, 300)}\r\n\t\t\t\thandleScrollBottom={handleScroll}\r\n\t\t\t\thandleFetched={handleFetched}\r\n\t\t\t\tsearchFilter={handleSearch}\r\n\t\t\t\tisSearch={true}\r\n\t\t\t\theaderPanelTitle='Друзья'\r\n\t\t\t\tfooterNameCount='друзей'\r\n\t\t\t/>\r\n\t\t</Panel>\r\n\t);\r\n}\r\n\r\nFriends.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tusers: selectFriends.getFriends(state)\r\n});\r\nexport default connect(mapStateToProps, null)(Friends);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {selectFriends} from '../../store/reducers';\r\nimport {frendsActions} from '../../store/actions';\r\n\r\nimport {Panel} from '@vkontakte/vkui';\r\n\r\nimport UsersList from '../UsersList';\r\n\r\nconst FriendsInInstagram = ({id, go, users, getOffsetInstagramFriends, dispatch}) => {\r\n\tconst {fetchedAllFriends} = frendsActions;\r\n\r\n\tconst handleSearch = (search) => {\r\n\t\treturn users.filter(({first_name, last_name, status, domain}) => {\r\n\t\t\tconst q = `${first_name} ${last_name} ${domain} ${status}`.toLowerCase();\r\n\t\t\treturn q.indexOf(search.toLowerCase()) > -1;\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleScroll = () => {\r\n\t};\r\n\r\n\tconst handleFetched = (setFetching) => {\r\n\t\tif (!users.length){\r\n\t\t\tdispatch(fetchedAllFriends(setFetching));\r\n\t\t}\r\n\t}\r\n\r\n\treturn(\r\n\t\t<Panel id={id}>\r\n\t\t\t<UsersList\r\n\t\t\t\tgo={go}\r\n\t\t\t\tusersList={users}\r\n\t\t\t\thandleScrollBottom={handleScroll}\r\n\t\t\t\thandleFetched={handleFetched}\r\n\t\t\t\tsearchFilter={handleSearch}\r\n\t\t\t\tisSearch={true}\r\n\t\t\t\theaderPanelTitle='Друзья'\r\n\t\t\t\tfooterNameCount='друзей'\r\n\t\t\t\tconnections='instagram'\r\n\t\t\t/>\r\n\t\t</Panel>\r\n\t);\r\n}\r\n\r\nFriendsInInstagram.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tusers: selectFriends.getFriendsInInstagram(state)\r\n});\r\nexport default connect(mapStateToProps, null)(FriendsInInstagram);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {selectFriends} from '../../store/reducers';\r\nimport {frendsActions} from '../../store/actions';\r\n\r\nimport {Panel} from '@vkontakte/vkui';\r\n\r\nimport UsersList from '../UsersList';\r\n\r\nconst BannedFriends = ({id, go, users, getOffsetBannedFriends, dispatch}) => {\r\n\tconst {fetchedAllFriends} = frendsActions;\r\n\r\n\tconst handleSearch = (search) => {\r\n\t\treturn users.filter(({first_name, last_name, status, domain}) => {\r\n\t\t\tconst q = `${first_name} ${last_name} ${domain} ${status}`.toLowerCase();\r\n\t\t\treturn q.indexOf(search.toLowerCase()) > -1;\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleScroll = () => {\r\n\t};\r\n\r\n\tconst handleFetched = (setFetching) => {\r\n\t\tif (!users.length){\r\n\t\t\tdispatch(fetchedAllFriends(setFetching));\r\n\t\t}\r\n\t}\r\n\r\n\treturn(\r\n\t\t<Panel id={id}>\r\n\t\t\t<UsersList\r\n\t\t\t\tgo={go}\r\n\t\t\t\tusersList={users}\r\n\t\t\t\thandleScrollBottom={handleScroll}\r\n\t\t\t\thandleFetched={handleFetched}\r\n\t\t\t\tsearchFilter={handleSearch}\r\n\t\t\t\tisSearch={true}\r\n\t\t\t\theaderPanelTitle='Удаленные/Забаненные'\r\n\t\t\t\tfooterNameCount='количество удаленных и забенных'\r\n\t\t\t/>\r\n\t\t</Panel>\r\n\t);\r\n}\r\n\r\nBannedFriends.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tusers: selectFriends.getBannedFriends(state)\r\n});\r\nexport default connect(mapStateToProps, null)(BannedFriends);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {selectFriends} from '../../store/reducers';\r\nimport {frendsActions} from '../../store/actions';\r\n\r\nimport {Panel} from '@vkontakte/vkui';\r\n\r\nimport UsersList from '../UsersList';\r\n\r\nconst SortLongTime = ({id, go, users, offsetFriends, dispatch}) => {\r\n\tconst {fetchedAllFriends} = frendsActions;\r\n\r\n\tconst handleSearch = (search) => {\r\n\t\treturn users.filter(({first_name, last_name, status, domain}) => {\r\n\t\t\tconst q = `${first_name} ${last_name} ${domain} ${status}`.toLowerCase();\r\n\t\t\treturn q.indexOf(search.toLowerCase()) > -1;\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleScroll = () => {\r\n\t};\r\n\r\n\tconst handleFetched = (setFetching) => {\r\n\t\tif (!users.length){\r\n\t\t\tdispatch(fetchedAllFriends(setFetching));\r\n\t\t}\r\n\t}\r\n\r\n\treturn(\r\n\t\t<Panel id={id}>\r\n\t\t\t<UsersList\r\n\t\t\t\tgo={go}\r\n\t\t\t\tusersList={users.slice(0, 300)}\r\n\t\t\t\thandleScrollBottom={handleScroll}\r\n\t\t\t\thandleFetched={handleFetched}\r\n\t\t\t\tsearchFilter={handleSearch}\r\n\t\t\t\tisSearch={true}\r\n\t\t\t\theaderPanelTitle='Друзья'\r\n\t\t\t\tfooterNameCount='друзей'\r\n\t\t\t\tlongTime\r\n\t\t\t/>\r\n\t\t</Panel>\r\n\t);\r\n}\r\n\r\nSortLongTime.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tusers: selectFriends.getSortLongTime(state)\r\n});\r\nexport default connect(mapStateToProps, null)(SortLongTime);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {Avatar} from '@vkontakte/vkui';\r\n\r\nimport'./Story.css';\r\n\r\nconst Story = ({id, size=64, name='', photo='', handleClick}) => {\r\n\r\n\treturn(\r\n\t\t<div key={id} className='Story__user' onClick={() => handleClick(id)}>\r\n\t\t\t<Avatar\r\n\t\t\t\tclassName='Story__user-avatar'\r\n\t\t\t\tsize={size}\r\n\t\t\t\tsrc={photo}/>\r\n\t\t\t<div className='Stories__full-name'>{name}</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nStory.propTypes = {\r\n\tid: PropTypes.number.isRequired,\r\n\tsize: PropTypes.number,\r\n\tname: PropTypes.string,\r\n\tphoto: PropTypes.string,\r\n\thandleClick: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Story;","import React, {useEffect} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {selectStories, selectUser} from '../../store/reducers';\r\nimport {storiesActions, userActions} from '../../store/actions';\r\n\r\nimport {Panel} from '@vkontakte/vkui';\r\n\r\nimport PanelHeader from '../../components/HeaderPanel';\r\nimport Story from '../../components/Story/Story';\r\n\r\nimport'./Stories.css';\r\n\r\nconst Stories = ({id, go, setUserStoryId, dispatch, profiles, usersProfile}) => {\r\n\tconst {fetcheStories} = storiesActions;\r\n\tconst {fetchedUsersProfile} = userActions;\r\n\r\n\tuseEffect(() => {\r\n\t\tdispatch(fetcheStories({extended: 1}));\r\n\t}, []);\r\n\r\n\tif (profiles.length > 0 && !usersProfile.length) {\r\n\t\tconst userIds = profiles.map(({id}) => id);\r\n\t\tdispatch(fetchedUsersProfile({user_ids: userIds}));\r\n\t}\r\n\r\n\tconst handleClick = (id) => {\r\n\t\tsetUserStoryId({ id, to:'userStory' });\r\n\t}\r\n\r\n\treturn(\r\n\t\t<Panel id={id}>\r\n\t\t\t<PanelHeader handelClick={go} dataTo='home' title='Истории' />\r\n\t\t\t<div className='Stories__wrapper'>\r\n\t\t\t\t{usersProfile.length > 0 && usersProfile.map(({id, first_name, last_name, photo_100}) =>\r\n\t\t\t\t\t<Story\r\n\t\t\t\t\t\thandleClick={handleClick}\r\n\t\t\t\t\t\tid={id} name={`${first_name} ${last_name}`} \r\n\t\t\t\t\t\tphoto={photo_100}/>)}\r\n\r\n\t\t\t\t<Story handleClick={handleClick}\r\n\t\t\t\t\t\tid={121112} name='sfsdffsdf'/>\r\n\t\t\t</div>\r\n\t\t</Panel>\r\n\t);\r\n}\r\n\r\nStories.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tprofiles: selectStories.getProfiles(state),\r\n\tusersProfile: selectUser.getUsersProfile(state)\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(Stories);","import React, {useEffect} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {selectStories} from '../../store/reducers';\r\nimport {storiesActions} from '../../store/actions';\r\n\r\nimport {Panel, List, Cell, Avatar} from '@vkontakte/vkui';\r\nimport Icon24MoreHorizontal from '@vkontakte/icons/dist/24/back';\r\n\r\nimport PanelHeader from '../../components/HeaderPanel';\r\nimport Story from '../../components/Story/Story';\r\n\r\nimport'./Stories.css';\r\n\r\nconst UserStory = ({id, go, dispatch, userStoryId, userStoreis}) => {\r\n\tconst {fetcheUserStories} = storiesActions;\r\n\tuseEffect(() => {\r\n\t\tdispatch(fetcheUserStories(userStoryId));\r\n\t}, []);\r\n\r\n\tconsole.log(userStoreis);\r\n\r\n\tconst handleClick = ({type, id, owner_id}) => {\r\n\t\tconst url = `https://vk.com/feed?w=story${owner_id}_${id}`;\r\n\t\twindow.open(url);\r\n\t};\r\n\r\n\tconst getPhoto = ({type, photo, video}) => {\r\n\t\tif (type === 'video') {\r\n\t\t\treturn video.photo_130;\r\n\t\t}\r\n\t\treturn photo.sizes[4].url;\r\n\t};\r\n\r\n\treturn(\r\n\t\t<Panel id={id}>\r\n\t\t\t<PanelHeader handelClick={go} dataTo='stories' title='Истории Пользователя' />\r\n\t\t\t<div className='Stories__wrapper'>\r\n\t\t\t\t{userStoreis && userStoreis.map(({id, type, ...others}) => (\r\n\t\t\t\t\t<Story\r\n\t\t\t\t\t\tid={id}\r\n\t\t\t\t\t\thandleClick={() => handleClick({id, type, ...others})}\r\n\t\t\t\t\t\tname={`${type === 'video' ? 'Видео' : 'Фото'}`}\r\n\t\t\t\t\t\tphoto={getPhoto({type, ...others})}/>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</Panel>\r\n\t);\r\n}\r\n\r\nUserStory.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tuserStoreis: selectStories.userStoreis(state)\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(UserStory);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport {classNames, getClassName, PopoutWrapper, Spinner, } from '@vkontakte/vkui';\r\nimport './ScreenSpinner.css';\r\n\r\nconst baseClassName = getClassName('ScreenSpinner');\r\n\r\nconst ScreenSpinner = ({ ...props }) => (\r\n\t<PopoutWrapper className={classNames(baseClassName, 'ScreenSpinner__disabled')} >\r\n\t\t<div className=\"ScreenSpinner__container\">\r\n\t\t\t<Spinner size=\"large\" {...props} />\r\n\t\t</div>\r\n\t</PopoutWrapper>\r\n);\r\nexport default ScreenSpinner;","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from 'react-redux';\r\n\r\nimport {selectFriends} from '../../store/reducers';\r\nimport {frendsActions} from '../../store/actions';\r\n\r\nimport {Panel,Group} from '@vkontakte/vkui';\r\nimport HeaderPanel from '../../components/HeaderPanel';\r\nimport ScreenSpinner from '../../components/ScreenSpinner/ScreenSpinner';\r\n\r\nimport { LineChart, Line, PieChart, Pie, Sector, Cell, Legend } from 'recharts';\r\n\r\nimport db from './db_friends.json';\r\n\r\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042', '#FF80333', '#FA8542'];\r\nconst style = {\r\n\ttop: 0,\r\n\tleft: '3px',\r\n\tlineHeight: '24px'\r\n};\r\n\r\nconst renderCustomizedLabel = ({ cx, cy, midAngle, innerRadius, outerRadius, percent, index }) => {\r\n\tconst RADIAN = Math.PI / 180;\r\n\tconst radius = innerRadius + (outerRadius - innerRadius) * 0.5;\r\n\tconst x  = cx + radius * Math.cos(-midAngle * RADIAN);\r\n\tconst y = cy  + radius * Math.sin(-midAngle * RADIAN);\r\n\r\n\treturn (<text x={x} y={y} fill=\"white\" textAnchor={x > cx ? 'start' : 'end'} dominantBaseline=\"central\" />);\r\n};\r\n\r\nclass City extends Component {\r\n\r\n\tstate ={\r\n\t\tscreenSpinner: true\r\n\t};\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\t\tconst {dispatch, users} = this.props;\r\n\t\tconst {fetchedAllFriends} = frendsActions;\r\n\t\tif (!users.length){\r\n\t\t\tdispatch(fetchedAllFriends(null, this.ending.bind(this)));\r\n\t\t} else {\r\n\t\t\tthis.ending();\r\n\t\t}\r\n\t}\r\n\r\n\tending () {\r\n\t\tthis.setState({ screenSpinner: false });\r\n\t}\r\n\r\n\trender () {\r\n\t\tconst {id, go, users} = this.props;\r\n\t\tconst {screenSpinner} = this.state;\r\n\t\treturn (\r\n\t\t\t<Panel id={id}>\r\n\t\t\t\t<HeaderPanel title='Города' handelClick={go} dataTo='home' />\r\n\t\t\t\t{screenSpinner ? \r\n\t\t\t\t\t<ScreenSpinner /> :\r\n\t\t\t\t\t<Group>\r\n\t\t\t\t\t\t<PieChart width={320} height={500} onMouseEnter={this.onPieEnter}>\r\n\t\t\t\t\t\t\t<Pie\r\n\t\t\t\t\t\t\t\tdataKey='value'\r\n\t\t\t\t\t\t\t\tdata={users} \r\n\t\t\t\t\t\t\t\tcx=\"70%\" \r\n\t\t\t\t\t\t\t\tcy=\"30%\" \r\n\t\t\t\t\t\t\t\tlabelLine={false}\r\n\t\t\t\t\t\t\t\tlabel={renderCustomizedLabel}\r\n\t\t\t\t\t\t\t\touterRadius={80} \r\n\t\t\t\t\t\t\t\tfill=\"#8884d8\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{users && users.map((entry, index) => <Cell key={index} fill={COLORS[index % COLORS.length]}/>)}\r\n\t\t\t\t\t\t\t</Pie>\r\n\t\t\t\t\t\t\t<Legend \r\n\t\t\t\t\t\t\t\ticonSize={10}\r\n\t\t\t\t\t\t\t\ticonType='circle'\r\n\t\t\t\t\t\t\t\twidth={320}\r\n\t\t\t\t\t\t\t\theight={5}\r\n\t\t\t\t\t\t\t\tlayout='vertical'\r\n\t\t\t\t\t\t\t\tverticalAlign='middle'\r\n\t\t\t\t\t\t\t\twrapperStyle={style}/>\r\n\t\t\t\t\t\t</PieChart>\r\n\t\t\t\t\t</Group>}\r\n\t\t\t</Panel>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nCity.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tusers: selectFriends.getSortFriendsFromCity(state)\r\n});\r\nexport default connect(mapStateToProps, null)(City);","import React, {useState} from 'react';\n\nimport {View} from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './containers/Home';\nimport Friends from './containers/Friends/Friends';\nimport Instagram from './containers/Friends/Instagram';\nimport BannedFriends from './containers/Friends/BannedFriends';\nimport SortLongTime from './containers/Friends/SortLongTime';\nimport Stories from './containers/Stories/Stories';\nimport UserStory from './containers/Stories/UserStory';\nimport City from './containers/Diagram/City';\n\nconst App = (props) => {\n\tconst [activePanel, setActivePanel] = useState('home');\n\tconst [userStoryId, setUserStoryId] = useState(0);\n\tconst go = ({ currentTarget: { dataset: {to} }}) => setActivePanel(to);\n\tconst openUserStory = ({id, to}) => {\n\t\tsetActivePanel(to);\n\t\tsetUserStoryId(id);\n\t};\n\n\treturn (\n\t\t<View activePanel={activePanel}>\n\t\t\t<Home id=\"home\" go={go} />\n\t\t\t<Friends id=\"friends\" go={go} />\n\t\t\t<Instagram id=\"friendsInInstagram\" go={go} />\n\t\t\t<BannedFriends id=\"deletedAndBanned\" go={go} />\n\t\t\t<SortLongTime id=\"sortlongtime\" go={go} />\n\t\t\t<City id=\"city\" go={go} />\n\t\t\t<Stories id=\"stories\" go={go} setUserStoryId={openUserStory} />\n\t\t\t<UserStory id=\"userStory\" go={go} userStoryId={userStoryId} />\n\t\t</View>\n\t);\n};\n\nexport default App;","import 'core-js/es6/map';\nimport 'core-js/es6/set';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {createStore, applyMiddleware} from 'redux';\nimport {Provider} from 'react-redux';\nimport thunk from 'redux-thunk';\nimport rootReducer from './store/reducers';\n\nimport connect from '@vkontakte/vkui-connect-promise';\nimport App from './App';\n\nconst store = createStore(rootReducer, applyMiddleware(thunk));\n\nconst CombineApp = () => (\n\t<Provider store={store}>\n\t\t<App />\n\t</Provider>\n);\n\nconnect.send('VKWebAppInit', {});\nReactDOM.render(<CombineApp />, document.getElementById('root'));\n"],"sourceRoot":""}