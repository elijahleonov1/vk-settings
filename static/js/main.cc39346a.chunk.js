(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,n){e.exports=n(361)},361:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"default",function(){return g}),n.d(r,"getUser",function(){return w});var a={};n.r(a),n.d(a,"default",function(){return S}),n.d(a,"getFriends",function(){return U});var c={};n.r(c),n.d(c,"fetchedUser",function(){return P});var o={};n.r(o),n.d(o,"fetchedFriends",function(){return H});var u=n(12),s=n.n(u),i=n(23),l=(n(155),n(157),n(1)),d=n.n(l),f=n(61),p=n.n(f),m=n(37),h=n(56),E=n(148),v=n(151),b="SET_USER",_={photo_200:"",first_name:"\u0412\u0430\u0441\u044f",last_name:"\u0412\u0430\u0441\u0435\u0447\u043a\u0438\u043d",city:{title:"New York"}};function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case b:return Object(v.a)({},e,t.payload);default:return e}}var w=function(e){return e.user},O="FETCH_ACCESS_TOKEN",k="";var y=n(110),j="FETCHED_FRIENDS",x=[];function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case j:return[].concat(Object(y.a)(e),Object(y.a)(t.payload));default:return e}}var U=function(e){return e.friends},C=Object(m.c)({user:g,accessToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case O:return t.payload;default:return e}},friends:S}),I=n(49),T=n(150),A=n(9),F=(n(360),"5.95"),N=localStorage.getItem("access_token"),V=function(){var e=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.send("VKWebAppGetUserInfo",{});case 3:return t=e.sent,e.next=7,t.data;case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),Error(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("------"),"friends.get",t={access_token:N,v:F},e.next=6,I.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:t});case 6:return n=e.sent,console.log("------",n),e.next=10,n.data.users;case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e.catch(0),Error(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(){return e.apply(this,arguments)}}(),P=function(){return function(){var e=Object(i.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:n=e.sent,t({type:b,payload:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},H=function(){return function(){var e=Object(i.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:n=e.sent,t({type:j,payload:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},K=function(e){var t=e.fetchedUser;return d.a.createElement(A.Group,{title:""},d.a.createElement(A.ListItem,{before:t.photo_200?d.a.createElement(A.Avatar,{src:t.photo_200}):null,description:t.city&&t.city.title?t.city.title:""},"".concat(t.first_name," ").concat(t.last_name)))},G=Object(h.b)(function(e){return{fetchedUser:(0,r.getUser)(e)}},null)(function(e){var t=e.id,n=e.go,r=e.fetchedUser;return function(e){Object(l.useEffect)(function(){e((0,c.fetchedUser)())},[])}(e.dispatch),d.a.createElement(A.Panel,{id:t},d.a.createElement(A.PanelHeader,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),d.a.createElement(K,{fetchedUser:r,go:n}),d.a.createElement(A.Group,{title:"\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u044b"},d.a.createElement(A.List,null,d.a.createElement(A.Cell,{expandable:!0,onClick:n,"data-to":"friends"},"\u0414\u0440\u0443\u0437\u044c\u044f"),d.a.createElement(A.Cell,{expandable:!0,onClick:n,"data-to":"friends"},"\u0414\u0440\u0443\u0437\u044c\u044f"),d.a.createElement(A.Cell,{expandable:!0,onClick:n,"data-to":"friends"},"\u0414\u0440\u0443\u0437\u044c\u044f"))))}),L=n(149),R=n.n(L),W=n(107),X=n.n(W),B=Object(h.b)(function(e){return{users:(0,a.getFriends)(e)}},null)(function(e){var t=e.id,n=e.go,r=e.users,a=e.dispatch,c=Object(A.platform)();return function(e){Object(l.useEffect)(function(){e((0,o.fetchedFriends)())},[])}(a),d.a.createElement(A.Panel,{id:t},d.a.createElement(A.PanelHeader,{left:d.a.createElement(A.HeaderButton,{onClick:n,"data-to":"home"},c===A.IOS?d.a.createElement(R.a,null):d.a.createElement(X.a,null))},"\u0414\u0440\u0443\u0437\u044c\u044f"),r&&r.map(function(e){return d.a.createElement(K,{fetchedUser:{id:e.id,first_name:e.first_name,last_name:e.last_name},go:n})}))}),J=function(e){var t=Object(l.useState)("home"),n=Object(T.a)(t,2),r=n[0],a=n[1],c=function(e){return a(e.currentTarget.dataset.to)};return d.a.createElement(A.View,{activePanel:r},d.a.createElement(G,{id:"home",go:c}),d.a.createElement(B,{id:"friends",go:c}))},M=Object(m.e)(C,Object(m.d)(Object(m.a)(E.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));I.a.send("VKWebAppInit",{}),function(){var e=Object(i.a)(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("access_token")){e.next=10;break}return e.next=3,I.a.send("VKWebAppGetAuthToken",{app_id:6940370,scope:"friends"});case 3:return t=e.sent,e.next=6,t.data.access_token;case 6:n=e.sent,console.log(t),localStorage.setItem("access_token",n),console.log("access_token",n);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),p.a.render(d.a.createElement(function(){return d.a.createElement(h.a,{store:M},d.a.createElement(J,null))},null),document.getElementById("root"))}},[[152,1,2]]]);
//# sourceMappingURL=main.cc39346a.chunk.js.map