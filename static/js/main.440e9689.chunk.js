(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{145:function(e,t,n){e.exports=n(350)},350:function(e,t,n){"use strict";n.r(t);var s=n(143),r=n(0),a=n.n(r),o=n(106),c=n.n(o),i=(n(331),n(332),n(29)),l=n(30),u=n(32),d=n(31),h=n(33),f=n(2),p=(n(349),n(144)),m=n.n(p),v=function(e,t){return m()(function(e,t){var n="";return Object.keys(t).forEach(function(e){return n+="".concat(e,"=").concat(t[e],"&")}),"https://api.vk.com/method/".concat(e,"?").concat(n,"v=5.80")}(e,t)).then(function(e){return e.json()}).catch(function(e){return console.error(e)})},k=function(e){return v("users.get",e)},g=function(e){return v("friends.get",e)},E=function(e){return v("friends.getRequests",e)},b=function(e){return v("friends.delete",e)},I=function(e){return v("fave.getPosts",e)},_=function(e){var t=e.id,n=e.go,s=e.fetchedUser;return a.a.createElement(f.Panel,{id:t},a.a.createElement(f.PanelHeader,null,"\u0412\u041a \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),s&&a.a.createElement(f.Group,{title:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"},a.a.createElement(f.ListItem,{before:s.photo_200?a.a.createElement(f.Avatar,{src:s.photo_200}):null,description:s.city&&s.city.title?s.city.title:""},"".concat(s.first_name," ").concat(s.last_name))),a.a.createElement(f.Group,{title:"\u041f\u0430\u043d\u0435\u043b\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438 \u0438 \u0437\u0430\u044f\u0432\u043a\u0430\u043c\u0438"},a.a.createElement(f.Div,null,a.a.createElement(f.Button,{size:"xl",level:"2",onClick:n,"data-to":"friends"},"\u0414\u0440\u0443\u0437\u044c\u044f")),a.a.createElement(f.Div,null,a.a.createElement(f.Button,{size:"xl",level:"2",onClick:n,"data-to":"subscribers"},"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0437\u0430\u044f\u0432\u043a\u0438")),a.a.createElement(f.Div,null,a.a.createElement(f.Button,{size:"xl",level:"2",onClick:n,"data-to":"default"},"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0438"))),a.a.createElement(f.Group,{title:"\u041f\u0430\u043d\u0435\u043b\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043b\u0430\u0439\u043a\u0430\u043c\u0438"},a.a.createElement(f.Div,null,a.a.createElement(f.Button,{size:"xl",level:"2",onClick:n,"data-to":"my-likes"},"\u043c\u043e\u0438 \u043b\u0430\u0439\u043a\u0438"))))},y=n(40),O=n.n(y),j=n(37),D=n.n(j),F=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return a.a.createElement(f.Panel,{id:this.props.id},a.a.createElement(f.PanelHeader,{left:a.a.createElement(f.HeaderButton,{onClick:this.props.go,"data-to":"home"},this.osname===f.IOS?a.a.createElement(O.a,null):a.a.createElement(D.a,null))},"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439 \u0448\u0430\u0431\u043b\u043e\u043d"))}}]),t}(a.a.Component),C=n(73),P=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={progress:0,countFriends:0,isDelAllFriends:!1,usersInfo:[],isPreloader:!0},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getFriends",value:function(){var e=this,t=0,n=!1;this.friendsInterval=setInterval(function(){n&&clearInterval(e.friendsInterval),g({count:100,offset:t,access_token:e.props.access_token}).then(function(s){t+=100,e.setState({countFriends:s.response.count}),e.getUsersInfo(s.response.items).then(function(t){t.error?console.error("\u041e\u0448\u0438\u0431\u043a\u0430",t.error):(n=!t.response.length,e.setState(function(e){var n;(n=e.usersInfo).push.apply(n,Object(C.a)(t.response)),e.countFriends=t.count,e.isPreloader=!1}),e.forceUpdate())}).catch(function(e){return console.error(e)})}).catch(function(e){return console.error(e)})},2e3)}},{key:"getUsersInfo",value:function(e){var t=e.slice(0,100).join(",");return k({user_ids:t,fields:"photo_200_orig,status",access_token:this.props.access_token})}},{key:"deleteFriend",value:function(e){var t=this;return function(){b({user_id:e,access_token:t.props.access_token}).then(function(n){if(n.error)console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f",n.error);else{var s=t.state.usersInfo.findIndex(function(t){return t.id===e});t.state.usersInfo.splice(s,1),t.forceUpdate()}}).catch(function(e){return console.error(e)})}}},{key:"deleteAllFriends",value:function(){var e=this,t=!this.state.usersInfo.length;this.setState({isDelAllFriends:!0}),this.intervalDeleteAllFriends=setInterval(function(){t&&clearInterval(e.intervalDeleteAllFriends),b({user_id:e.state.usersInfo[0].id,access_token:e.props.access_token}).then(function(t){t.error?console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f",t.error):(e.state.usersInfo.splice(0,1),e.setState(function(e){return e.progress++}),e.forceUpdate())}).catch(function(e){return console.error(e)})},3e3)}},{key:"cancelDelFriends",value:function(){clearInterval(this.interval),this.setState({isDelAllFriends:!1})}},{key:"prev",value:function(e){clearInterval(this.subscribersInterval),clearInterval(this.friendsInterval),this.props.go(e)}},{key:"componentDidMount",value:function(){this.getFriends()}},{key:"render",value:function(){var e=this;return a.a.createElement(f.Panel,{id:this.props.id},a.a.createElement(f.PanelHeader,{left:a.a.createElement(f.HeaderButton,{onClick:this.prev.bind(this),"data-to":"home"},this.osname===f.IOS?a.a.createElement(O.a,null):a.a.createElement(D.a,null))},"\u0414\u0440\u0443\u0437\u044c\u044f"),a.a.createElement(f.Group,{title:""},a.a.createElement(f.Div,{style:{display:"flex",zIndex:100}},a.a.createElement(f.Button,{size:"l",stretched:!0,style:{marginRight:8},onClick:this.deleteAllFriends.bind(this)},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435\u0445"),a.a.createElement(f.Button,{size:"l",stretched:!0,level:"secondary",onClick:this.cancelDelFriends.bind(this)},"\u041e\u0442\u043c\u0435\u043d\u0430")),this.state.isDelAllFriends&&a.a.createElement(f.Cell,{description:"\u0443\u0434\u0430\u043b\u0435\u043d\u043e ".concat(this.state.progress," / ").concat(this.state.countFriends)},a.a.createElement(f.Progress,{value:this.state.progress}))),a.a.createElement(f.Group,{title:"\u0414\u0440\u0443\u0437\u044c\u044f ".concat(this.state.usersInfo.length)},this.state.isPreloader&&a.a.createElement(f.Cell,{size:"l"},a.a.createElement(f.Spinner,{size:"large",style:{margin:"150px 0"}})),this.state.usersInfo.map(function(t,n){return a.a.createElement(f.Cell,{size:"l",description:t.status||"\u0421\u0442\u0430\u0442\u0443\u0441 \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d",before:a.a.createElement(f.Avatar,{src:t.photo_200_orig}),bottomContent:a.a.createElement(f.Button,{onClick:e.deleteFriend(t.id)},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),key:n},"".concat(t.first_name," ").concat(t.last_name))})))}}]),t}(a.a.Component),A=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={activeTab4:"dial"},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getLikesPosts",value:function(){var e=this;I({count:100,offset:0,access_token:this.props.access_token}).then(function(t){e.setState({postsLikes:t.response.items})}).catch(function(e){return console.error(e)})}},{key:"componentDidMount",value:function(){this.getLikesPosts()}},{key:"render",value:function(){var e=this;return a.a.createElement(f.Panel,{id:this.props.id},a.a.createElement(f.PanelHeader,{left:a.a.createElement(f.HeaderButton,{onClick:this.props.go,"data-to":"home"},this.osname===f.IOS?a.a.createElement(O.a,null):a.a.createElement(D.a,null))},"\u041c\u043e\u0438 \u043b\u0430\u0439\u043a\u0438"),a.a.createElement(f.Tabs,{theme:"light"},a.a.createElement(f.TabsItem,{onClick:function(){return e.setState({activeTab4:"dial"})},selected:"dial"===this.state.activeTab4},"\u041f\u043e\u0441\u0442\u044b"),a.a.createElement(f.TabsItem,{onClick:function(){return e.setState({activeTab4:"messages"})},selected:"messages"===this.state.activeTab4},"\u0424\u043e\u0442\u043e")),a.a.createElement(f.Group,null,this.state.postsLikes&&this.state.postsLikes.map(function(e,t){return a.a.createElement(f.Group,{key:Date.now()+e.id},a.a.createElement(f.Gallery,{slideWidth:"100%",style:{height:150}},e.attachments&&e.attachments.map(function(e){return a.a.createElement("img",{src:e[e.type].photo_640||e[e.type].photo&&e[e.type].photo.sizes.pop().url,key:Date.now()+e[e.type].id})})),a.a.createElement(f.Div,null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. ",t))})))}}]),t}(a.a.Component),S=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={progress:0,isDelAllFriends:!1,countOutgoingRequests:0,usersInfo:[],isPreloader:!0},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"getOutgoingRequests",value:function(){var e=this,t=0,n=!1;this.subscribersInterval=setInterval(function(){n&&clearInterval(e.subscribersInterval),E({count:100,offset:t,out:1,access_token:e.props.access_token}).then(function(s){t+=100,e.setState({countOutgoingRequests:s.response.count}),e.getUsersInfo(s.response.items).then(function(t){t.error?console.error("\u041e\u0448\u0438\u0431\u043a\u0430",t.error):(n=!t.response.length,e.setState(function(e){var n;(n=e.usersInfo).push.apply(n,Object(C.a)(t.response)),e.isPreloader=!1}),e.forceUpdate())}).catch(function(e){return console.error(e)})}).catch(function(e){return console.error(e)})},2e3)}},{key:"getUsersInfo",value:function(e){var t=e.slice(0,100).join(",");return k({user_ids:t,fields:"photo_200_orig,status",access_token:this.props.access_token})}},{key:"deleteFriend",value:function(e){var t=this;return function(){b({user_id:e,access_token:t.props.access_token}).then(function(n){if(n.error)console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f",n.error);else{var s=t.state.usersInfo.findIndex(function(t){return t.id===e});t.state.usersInfo.splice(s,1),t.forceUpdate()}}).catch(function(e){return console.error(e)})}}},{key:"deleteAllFriends",value:function(){var e=this,t=!this.state.usersInfo.length;this.setState({isDelAllFriends:!0}),this.intervalDeleteAllFriends=setInterval(function(){t&&clearInterval(e.intervalDeleteAllFriends),b({user_id:e.state.usersInfo[0].id,access_token:e.props.access_token}).then(function(t){t.error?console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f",t.error):(e.state.usersInfo.splice(0,1),e.setState(function(e){return e.progress++}),e.forceUpdate())}).catch(function(e){return console.error(e)})},3e3)}},{key:"cancelDelFriends",value:function(){clearInterval(this.interval),this.setState({isDelAllFriends:!1})}},{key:"prev",value:function(e){clearInterval(this.subscribersInterval),clearInterval(this.intervalDeleteAllFriends),this.props.go(e)}},{key:"componentDidMount",value:function(){this.getOutgoingRequests()}},{key:"render",value:function(){var e=this;return a.a.createElement(f.Panel,{id:this.props.id},a.a.createElement(f.PanelHeader,{left:a.a.createElement(f.HeaderButton,{onClick:this.prev.bind(this),"data-to":"home"},this.osname===f.IOS?a.a.createElement(O.a,null):a.a.createElement(D.a,null))},"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"),a.a.createElement(f.Group,{title:""},a.a.createElement(f.Div,{style:{display:"flex",zIndex:100}},a.a.createElement(f.Button,{size:"l",stretched:!0,style:{marginRight:8},onClick:this.deleteAllFriends.bind(this)},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0443 \u0432\u0441\u0435\u0445"),a.a.createElement(f.Button,{size:"l",stretched:!0,level:"secondary",onClick:this.cancelDelFriends.bind(this)},"\u041e\u0442\u043c\u0435\u043d\u0430")),this.state.isDelAllFriends&&a.a.createElement(f.Cell,{description:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d\u043e ".concat(this.state.progress," / ").concat(this.state.countOutgoingRequests)},a.a.createElement(f.Progress,{value:this.state.progress}))),a.a.createElement(f.Group,{title:"\u0418\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0437\u0430\u044f\u0432\u043a\u0438 \u0432 \u0434\u0440\u0443\u0437\u044c\u044f ".concat(this.state.usersInfo.length)},this.state.isPreloader&&a.a.createElement(f.Cell,{size:"l"},a.a.createElement(f.Spinner,{size:"large",style:{margin:"150px 0"}})),this.state.usersInfo.map(function(t,n){return a.a.createElement(f.Cell,{size:"l",description:t.status||"\u0421\u0442\u0430\u0442\u0443\u0441 \u043d\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d",before:a.a.createElement(f.Avatar,{src:t.photo_200_orig}),bottomContent:a.a.createElement(f.Button,{onClick:e.deleteFriend(t.id)},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"),key:n},"".concat(t.first_name," ").concat(t.last_name))})))}}]),t}(a.a.Component),z=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).go=function(e){n.setState({activePanel:e.currentTarget.dataset.to})},n.state={activePanel:"home",fetchedUser:null,access_token:"eb6fcc851df6e78f09b60d8a0c097b2e634ca4ed6258d2c8adc3feae96c804d44e7c01be49bea566c2bfc"},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"getUserInfo",value:function(){var e=this;k({fields:"photo_200,status,city",access_token:this.state.access_token}).then(function(t){e.setState({fetchedUser:t.response[0]})}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){return a.a.createElement(f.View,{activePanel:this.state.activePanel},a.a.createElement(_,{id:"home",fetchedUser:this.state.fetchedUser,go:this.go,access_token:this.state.access_token}),a.a.createElement(F,{id:"default",go:this.go,access_token:this.state.access_token}),a.a.createElement(P,{id:"friends",go:this.go,access_token:this.state.access_token}),a.a.createElement(S,{id:"subscribers",go:this.go,access_token:this.state.access_token}),a.a.createElement(A,{id:"my-likes",go:this.go,access_token:this.state.access_token}))}}]),t}(a.a.Component);s.a.send("VKWebAppInit",{}).then(function(e){return console.log("VKWebAppInit success:",e)}).catch(function(e){return console.error("VKWebAppInit error:",e)}),c.a.render(a.a.createElement(z,null),document.getElementById("root"))}},[[145,1,2]]]);
//# sourceMappingURL=main.440e9689.chunk.js.map