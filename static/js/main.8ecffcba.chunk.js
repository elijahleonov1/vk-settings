(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,n){e.exports=n(361)},361:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"default",function(){return E}),n.d(r,"getUser",function(){return O});var a={};n.r(a),n.d(a,"default",function(){return S}),n.d(a,"getFriends",function(){return y}),n.d(a,"getFriendsInInstagram",function(){return C});var c={};n.r(c),n.d(c,"default",function(){return T}),n.d(c,"getSearch",function(){return P});var s={};n.r(s),n.d(s,"fetchedUser",function(){return B});var o={};n.r(o),n.d(o,"fetchedFriends",function(){return J}),n.d(o,"updateFriends",function(){return M});var i={};n.r(i),n.d(i,"fetchenSearch",function(){return Q});n(154),n(156);var u=n(0),l=n.n(u),f=n(64),d=n.n(f),h=n(51),p=n(33),m=n(151),v=n(52),g="SET_USER",b={photo_200:"https://pp.userapi.com/c841034/v841034569/3b8c1/pt3sOw_qhfg.jpg",first_name:"\u0412\u0430\u0441\u044f",last_name:"\u0412\u0430\u0441\u0435\u0447\u043a\u0438\u043d",city:{title:"New York"}};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case g:return Object(v.a)({},e,t.payload);default:return e}}var O=function(e){return e.user},j=n(26),w="FETCHED_FRIENDS",_="UPDATE_FRIENDS",k={users:[],instagramUsers:[]};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case w:return Object(v.a)({},e,{users:Object(j.a)(t.users),instagramUsers:Object(j.a)(t.users.filter(function(e){return e.instagram}))});case _:return Object(v.a)({},e,{users:[].concat(Object(j.a)(e.users),Object(j.a)(t.users)),instagramUsers:[].concat(Object(j.a)(e.instagramUsers),Object(j.a)(t.users.filter(function(e){return e.instagram})))});default:return e}}var y=function(e){return e.friends.users},C=function(e){return e.friends.instagramUsers},x="FETCHED_SEARCH",F={q:[]};function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case x:return Object(v.a)({},e,{q:t.search.filter(function(e){return"profile"===e.type})});default:return e}}var P=function(e){return e.search.q},I=Object(h.c)({user:E,friends:S,search:T}),U=n(53),H=n(13),R=n(2),A=(n(358),n(10)),z=n.n(A),N=n(21),q="5.95",L={access_token:"",dateTime:"",scope:""},D=function(){L.access_token="",L.dateTime="",L.scope=""},V=function(){var e=Object(N.a)(z.a.mark(function e(t){var n;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.send("VKWebAppGetAuthToken",{app_id:7080438,scope:t});case 3:return n=e.sent,e.next=6,n.data.access_token;case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(N.a)(z.a.mark(function e(t){var n,r,a,c,s,o;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,1e6,n=Date.now(),r=L.dateTime||Date.now()-1e6+1,a=n-r,c=L.scope!==t,s=!L.oneFetched,!(!localStorage.access_token&&a>1e6||c)||!s){e.next=14;break}return e.next=10,V(t);case 10:o=e.sent,L.access_token=o,L.dateTime=n,L.scope=t;case 14:return e.next=16,L.access_token;case 16:return e.abrupt("return",e.sent);case 19:throw e.prev=19,e.t0=e.catch(0),D(),Error(e.t0.message);case 23:case"end":return e.stop()}},e,null,[[0,19]])}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(N.a)(z.a.mark(function e(){var t;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.a.send("VKWebAppGetUserInfo",{});case 3:return t=e.sent,e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(N.a)(z.a.mark(function e(){var t,n,r,a,c,s=arguments;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:100,n=s.length>1&&void 0!==s[1]?s[1]:0,e.prev=2,e.next=5,G("friends, groups");case 5:return r=e.sent,"friends.get","connections,nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities",a={access_token:r,v:q,fields:"connections,nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities",count:t,offset:n},e.next=11,U.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:a});case 11:return c=e.sent,e.next=14,c.data.response.items;case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t0=e.catch(2),D(),Error(e.t0.message);case 21:case"end":return e.stop()}},e,null,[[2,17]])}));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(N.a)(z.a.mark(function e(t){var n,r,a,c,s,o,i,u,l,f,d,h,p,m;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.q,r=void 0===n?"":n,a=t.offset,c=void 0===a?0:a,s=t.limit,o=void 0===s?10:s,i=t.filters,u=void 0===i?"":i,l=t.fields,void 0===l?"":l,f=t.search_global,d=void 0===f?1:f,e.prev=1,e.next=4,G("friends, groups");case 4:return h=e.sent,"search.getHints",p={access_token:h,v:q,q:r,offset:c,limit:o,filters:u,search_global:d},e.next=9,U.a.send("VKWebAppCallAPIMethod",{method:"search.getHints",params:p});case 9:return m=e.sent,e.next=12,m.data.response.items;case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t0=e.catch(1),D(),Error(e.t0.message);case 19:case"end":return e.stop()}},e,null,[[1,15]])}));return function(t){return e.apply(this,arguments)}}(),B=function(){return function(){var e=Object(N.a)(z.a.mark(function e(t){var n;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:n=e.sent,t({type:g,payload:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},J=function(e){return function(){var t=Object(N.a)(z.a.mark(function t(n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W();case 2:r=t.sent,n({type:w,users:r}),e&&e();case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=Object(N.a)(z.a.mark(function t(n){var r;return z.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(100,e);case 2:r=t.sent,n({type:_,users:Object(j.a)(r)});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},Q=function(e){var t=e.q,n=e.filters,r=e.fields;return function(){var e=Object(N.a)(z.a.mark(function e(a){var c;return z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y({q:t,filters:n,fields:r});case 2:c=e.sent,a({type:x,search:Object(j.a)(c)});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},X=n(65),Z=n.n(X),$=function(e){var t=e.size,n=e.id,r=e.photo_50,a=e.photo_100,c=e.photo_200,s=e.photo_200_orig,o=e.city,i=e.country,u=e.first_name,f=e.last_name,d=(e.bdate,e.description),h=e.instagram,p=function(e){var t=e.id,n=e.type,r=e.instagram;switch(n){case"vk":return"https://vk.com/id".concat(t);case"instagram":return"https://www.instagram.com/".concat(r);default:return"https://vk.com/id".concat(t)}}({id:n,type:e.connections,instagram:h});return l.a.createElement(R.Cell,{key:n,before:l.a.createElement(R.Avatar,{size:t,src:s||c||a||r}),size:"l",description:d||"".concat(o.title," ").concat(i.title),onClick:function(){return function(e){window.location.href=e}(p)}},"".concat(u," ").concat(f))};$.defaultProps={size:48,city:{title:""},country:{title:""},connections:"vk"};var ee=$,te=Object(p.b)(function(e){return{fetchedUser:r.getUser(e)}},null)(function(e){var t=e.id,n=e.go,r=e.fetchedUser,a=e.dispatch,c=Object(u.useState)(!1),o=Object(H.a)(c,2),i=o[0],f=o[1];!function(e){Object(u.useEffect)(function(){e((0,s.fetchedUser)())},[])}(a);return l.a.createElement(R.Panel,{id:t},l.a.createElement(R.PanelHeader,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),l.a.createElement(R.PullToRefresh,{onRefresh:function(){f(!0),setTimeout(function(){f(!1)},2e3)},isFetching:i},l.a.createElement(R.Group,{title:""},l.a.createElement(ee,Object.assign({size:36},r,{go:n}))),l.a.createElement(R.Group,{title:""},l.a.createElement(R.List,null,l.a.createElement(R.Cell,{onClick:n,"data-to":"friends",asideContent:l.a.createElement(Z.a,null)},"\u0414\u0440\u0443\u0437\u044c\u044f"),l.a.createElement(R.Cell,{onClick:n,"data-to":"friendsInInstagram",asideContent:l.a.createElement(Z.a,null)},"\u0414\u0440\u0443\u0437\u044c\u044f \u0432 \u0438\u043d\u0441\u0442\u0430\u0433\u0440\u0430\u043c\u043c\u0435"),l.a.createElement(R.Cell,{onClick:n,"data-to":"search",asideContent:l.a.createElement(Z.a,null)},"\u041f\u043e\u0438\u0441\u043a")))))}),ne=function(e){var t=e.handleScroll,n=e.handleRefresh,r=e.isFetching,a=e.list,c=(e.component,e.footerNameCount),s=e.groupTitle,o=e.children;return l.a.createElement(R.PullToRefresh,{onScroll:t,onRefresh:n,isFetching:r},!a.length&&!r&&l.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},l.a.createElement(R.Spinner,{size:"regular",style:{marginTop:20}})),a.length>0&&l.a.createElement(R.Group,{title:s},a.map(function(e,t){return l.a.createElement(R.List,{key:e.id||t},Object(u.cloneElement)(o,e),l.a.createElement("span",null))})),l.a.createElement(R.Footer,null,a.length," ",c))};ne.defaultProps={handleScroll:function(){}};var re=ne,ae=n(152),ce=n.n(ae),se=n(111),oe=n.n(se),ie=Object(R.platform)(),ue=function(e){var t=e.handelClick,n=e.dataTo,r=e.title;return l.a.createElement(R.PanelHeader,{left:l.a.createElement(R.HeaderButton,{onClick:t,"data-to":n},ie===R.IOS?l.a.createElement(ce.a,null):l.a.createElement(oe.a,null))},r)},le=function(e){var t=e.go,n=e.usersList,r=e.handleScroll,a=e.handleFetched,c=e.searchFilter,s=e.isSearch,o=e.headerPanelTitle,i=e.footerNameCount,f=Object(u.useState)(!1),d=Object(H.a)(f,2),h=d[0],p=d[1],m=Object(u.useState)(""),v=Object(H.a)(m,2),g=v[0],b=v[1],E=Object(u.useState)(""),O=Object(H.a)(E,2),j=O[0],w=O[1],_=Object(u.useState)(100),k=Object(H.a)(_,2),S=k[0],y=k[1];Object(u.useEffect)(function(){window.addEventListener("scroll",x),a(C)},[]);var C=function(){return p(!1)},x=function(e){var t=e.target.documentElement.scrollHeight,n=e.target.documentElement.clientHeight;window.pageYOffset+5>=t-n&&(r(S),y(S+100))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(ue,{title:o,handelClick:t,dataTo:"home"}),n.length>0&&s&&l.a.createElement(R.Search,{value:g,onChange:function(e){var t=c(e);b(e),w(t)},onClose:function(){b(""),w("")}}),l.a.createElement(re,{handleScroll:x,handleRefresh:function(){p(!0),a(C)},isFetching:h,list:j.length?j:n,footerNameCount:i},l.a.createElement(ee,{size:36,go:t})))};le.defaultProps={isSearch:!1,searchFilter:function(){},headerPanelTitle:"",footerNameCount:""};var fe=le,de=Object(p.b)(function(e){return{users:a.getFriends(e)}},null)(function(e){var t=e.id,n=e.go,r=e.users,a=e.dispatch,c=Object(u.useState)(!1),s=Object(H.a)(c,2),i=(s[0],s[1]),f=Object(u.useState)(""),d=Object(H.a)(f,2),h=(d[0],d[1]),p=Object(u.useState)(""),m=Object(H.a)(p,2),v=(m[0],m[1]),g=Object(u.useState)(100),b=Object(H.a)(g,2),E=(b[0],b[1],o.updateFriends),O=o.fetchedFriends;Object(u.useEffect)(function(){window.addEventListener("scroll",w),a(O(j))},[]);var j=function(){return i(!1)},w=function(e){a(E(e))};return l.a.createElement(R.Panel,{id:t},l.a.createElement(fe,{go:n,usersList:r,handleScroll:w,handleFetched:function(){a(O(j))},searchFilter:function(e){var t=r.filter(function(t){var n=t.first_name,r=t.last_name,a=t.status,c=t.domain;return"".concat(n," ").concat(r," ").concat(c," ").concat(a).toLowerCase().indexOf(e.toLowerCase())>-1});h(e),v(t)},isSearch:!0,headerPanelTitle:"\u0414\u0440\u0443\u0437\u044c\u044f",footerNameCount:"\u0434\u0440\u0443\u0437\u0435\u0439"}))}),he=Object(p.b)(function(e){return{users:a.getFriendsInInstagram(e)}},null)(function(e){var t=e.id,n=e.go,r=e.users,a=e.dispatch,c=100,s=Object(u.useState)(!1),i=Object(H.a)(s,2),f=i[0],d=i[1],h=o.updateFriends,p=o.fetchedFriends;Object(u.useEffect)(function(){window.addEventListener("scroll",v),a(p(m))},[]);var m=function(){return d(!1)},v=function(e){var t=e.target.documentElement.scrollHeight,n=e.target.documentElement.clientHeight;window.pageYOffset+5>=t-n&&(a(h(c)),c+=100)};return l.a.createElement(R.Panel,{id:t},l.a.createElement(ue,{title:"\u0414\u0440\u0443\u0437\u044c\u044f",handelClick:n,dataTo:"home"}),l.a.createElement(re,{handleScroll:v,handleRefresh:function(){d(!0),a(p(m))},isFetching:f,list:r,footerNameCount:"\u0434\u0440\u0443\u0437\u0435\u0439"},l.a.createElement(ee,{size:56,go:n,connections:"instagram"})))}),pe=function(e){var t=e.profile,n=t.first_name,r=t.last_name,a=t.id,c=e.description;return l.a.createElement(R.Cell,{key:a,description:c,onClick:function(){return window.location.assign("https://vk.com/id".concat(a))}},"".concat(n," ").concat(r))},me=Object(p.b)(function(e){return{fetchedSearch:c.getSearch(e)}},null)(function(e){var t=e.id,n=e.go,r=e.dispatch,a=e.fetchedSearch,c=Object(u.useState)(!1),s=Object(H.a)(c,2),o=s[0],f=s[1],d=Object(u.useState)(""),h=Object(H.a)(d,2),p=h[0],m=h[1],v=i.fetchenSearch;return l.a.createElement(R.Panel,{id:t},l.a.createElement(ue,{handelClick:n,dataTo:"home",title:"\u041f\u043e\u0438\u0441\u043a"}),l.a.createElement(R.Search,{value:p,onChange:function(e){m(e),r(v({q:e,filters:"friends",fields:"crop_photo"}))}}),l.a.createElement(re,{handleRefresh:function(){f(!0),setTimeout(function(){r(v({search:p,filters:"friends",fields:"crop_photo"})),f(!1)},2e3)},isFetching:o,list:a,footerNameCount:"\u043d\u0430\u0439\u0434\u0435\u043d\u043e"},l.a.createElement(pe,null)))}),ve=function(e){var t=Object(u.useState)("home"),n=Object(H.a)(t,2),r=n[0],a=n[1],c=function(e){return a(e.currentTarget.dataset.to)};return l.a.createElement(R.View,{activePanel:r},l.a.createElement(te,{id:"home",go:c}),l.a.createElement(de,{id:"friends",go:c}),l.a.createElement(he,{id:"friendsInInstagram",go:c}),l.a.createElement(me,{id:"search",go:c}))},ge=Object(h.d)(I,Object(h.a)(m.a));U.a.send("VKWebAppInit",{}),d.a.render(l.a.createElement(function(){return l.a.createElement(p.a,{store:ge},l.a.createElement(ve,null))},null),document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.8ecffcba.chunk.js.map