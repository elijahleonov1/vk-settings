(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{153:function(e,t,n){e.exports=n(361)},361:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"default",function(){return E}),n.d(r,"getUser",function(){return b});var a={};n.r(a),n.d(a,"default",function(){return j}),n.d(a,"getFriends",function(){return y});var c={};n.r(c),n.d(c,"fetchedUser",function(){return z});var o={};n.r(o),n.d(o,"fetchedFriends",function(){return A}),n.d(o,"updateFriends",function(){return H});n(154),n(156);var s=n(0),u=n.n(s),i=n(63),l=n.n(i),f=n(50),d=n(37),p=n(152),m=n(65),h="SET_USER",v={photo_200:"https://pp.userapi.com/c841034/v841034569/3b8c1/pt3sOw_qhfg.jpg",first_name:"\u0412\u0430\u0441\u044f",last_name:"\u0412\u0430\u0441\u0435\u0447\u043a\u0438\u043d",city:{title:"New York"}};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case h:return Object(m.a)({},e,t.payload);default:return e}}var b=function(e){return e.user},g=n(58),_="FETCHED_FRIENDS",O="UPDATE_FRIENDS",w={users:[]};function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case _:return Object(m.a)({},e,{users:Object(g.a)(t.users)});case O:return Object(m.a)({},e,{users:[].concat(Object(g.a)(e.users),Object(g.a)(t.users))});default:return e}}var y=function(e){return e.friends.users},k=Object(f.c)({user:E,friends:j}),x=n(57),F=n(38),C=n(2),S=(n(358),n(17)),P=n.n(S),U=n(34),T=function(){var e=Object(U.a)(P.a.mark(function e(){var t;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.send("VKWebAppGetAuthToken",{app_id:7080438,scope:"friends"});case 3:return t=e.sent,e.next=6,t.data.access_token;case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(U.a)(P.a.mark(function e(){var t;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.send("VKWebAppGetUserInfo",{});case 3:return t=e.sent,e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(U.a)(P.a.mark(function e(){var t,n,r,a,c,o=arguments;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:100,n=o.length>1&&void 0!==o[1]?o[1]:0,e.prev=2,e.next=5,T();case 5:return r=e.sent,"friends.get","nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities",a={access_token:r,v:"5.95",fields:"nickname,domain,sex,bdate,city,country,timezone,photo_50,photo_100,photo_200_orig,has_mobile,contacts,education,online,relation,last_seen,status,can_write_private_message,can_see_all_posts,can_post,universities",count:t,offset:n},e.next=11,x.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:a});case 11:return c=e.sent,e.next=14,c.data.response.items;case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t0=e.catch(2),Error(e.t0.message);case 20:case"end":return e.stop()}},e,null,[[2,17]])}));return function(){return e.apply(this,arguments)}}(),z=function(){return function(){var e=Object(U.a)(P.a.mark(function e(t){var n;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:n=e.sent,t({type:h,payload:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(U.a)(P.a.mark(function t(n){var r;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R();case 2:r=t.sent,n({type:_,users:r}),e&&e();case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){var t=Object(U.a)(P.a.mark(function t(n){var r;return P.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R(100,e);case 2:r=t.sent,n({type:O,users:Object(g.a)(r)});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},D=n(79),G=n.n(D),V=function(e){var t=e.size,n=void 0===t?40:t,r=e.fetchedUser,a=r.id,c=r.photo_50,o=r.photo_100,s=r.photo_200,i=r.photo_200_orig,l=r.city,f=void 0===l?{title:""}:l,d=r.first_name,p=r.last_name,m=r.bdate,h=i||s||o||c;return u.a.createElement(C.Cell,{key:a,before:u.a.createElement(C.Avatar,{size:n,src:h,onClick:function(){return window.open("https://vk.com/id".concat(a))}}),size:"l",description:f.title,bottomContent:m&&"\u0414\u0435\u043d\u044c \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f: ".concat(m)},"".concat(d," ").concat(p))},K=Object(d.b)(function(e){return{fetchedUser:(0,r.getUser)(e)}},null)(function(e){var t=e.id,n=e.go,r=e.fetchedUser,a=e.dispatch,o=Object(s.useState)(!1),i=Object(F.a)(o,2),l=i[0],f=i[1];!function(e){Object(s.useEffect)(function(){e((0,c.fetchedUser)())},[])}(a);return u.a.createElement(C.Panel,{id:t},u.a.createElement(C.PanelHeader,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),u.a.createElement(C.PullToRefresh,{onRefresh:function(){f(!0),setTimeout(function(){f(!1)},2e3)},isFetching:l},u.a.createElement(C.Group,{title:""},u.a.createElement(V,{size:48,fetchedUser:r,go:n})),u.a.createElement(C.Group,{title:""},u.a.createElement(C.List,null,u.a.createElement(C.Cell,{onClick:n,"data-to":"friends",asideContent:u.a.createElement(G.a,null)},"\u0414\u0440\u0443\u0437\u044c\u044f"),u.a.createElement(C.Cell,{onClick:n,"data-to":"search",asideContent:u.a.createElement(G.a,null)},"\u041f\u043e\u0438\u0441\u043a")))))}),W=n(80),B=n.n(W),L=n(64),N=n.n(L),J=Object(d.b)(function(e){return{users:(0,a.getFriends)(e)}},null)(function(e){var t=100,n=e.id,r=e.go,a=e.users,c=e.dispatch,i=Object(s.useState)(!1),l=Object(F.a)(i,2),f=l[0],d=l[1],p=Object(C.platform)(),m=o.updateFriends,h=o.fetchedFriends;Object(s.useEffect)(function(){window.addEventListener("scroll",E),c(h(v))},[]);var v=function(){return d(!1)},E=function(e){var n=e.target.documentElement.scrollHeight,r=e.target.documentElement.clientHeight;window.pageYOffset+5>=n-r&&(c(m(t)),t+=100)};return u.a.createElement(C.Panel,{id:n},u.a.createElement(C.PanelHeader,{left:u.a.createElement(C.HeaderButton,{onClick:r,"data-to":"home"},p===C.IOS?u.a.createElement(B.a,null):u.a.createElement(N.a,null))},"\u0414\u0440\u0443\u0437\u044c\u044f"),u.a.createElement(C.PullToRefresh,{onScroll:E,onRefresh:function(){d(!0),c(h(v))},isFetching:f},!a.length&&!f&&u.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"}},u.a.createElement(C.Spinner,{size:"regular",style:{marginTop:20}})),!!a.length&&u.a.createElement(C.Group,{title:""},a.map(function(e){return u.a.createElement(C.List,{key:e.id},u.a.createElement(V,{size:58,fetchedUser:e,go:r}),u.a.createElement("span",null))})),u.a.createElement(C.Footer,null,a.length," \u0434\u0440\u0443\u0437\u0435\u0439")))}),Y=Object(d.b)(function(e){return{users:(0,a.getFriends)(e)}},null)(function(e){var t=e.id,n=e.go,r=Object(C.platform)(),a=Object(s.useState)(!1),c=Object(F.a)(a,2),o=c[0],i=c[1];return u.a.createElement(C.Panel,{id:t},u.a.createElement(C.PanelHeader,{left:u.a.createElement(C.HeaderButton,{onClick:n,"data-to":"home"},r===C.IOS?u.a.createElement(B.a,null):u.a.createElement(N.a,null))},"\u041f\u043e\u0438\u0441\u043a"),u.a.createElement(C.Search,{value:"",onChange:function(){}}),u.a.createElement(C.PullToRefresh,{onRefresh:function(){i(!0),setTimeout(function(){i(!1)},2e3)},isFetching:o},u.a.createElement(C.Footer,null,"\u043f\u0443\u0441\u0442\u043e")))}),q=function(e){var t=Object(s.useState)("home"),n=Object(F.a)(t,2),r=n[0],a=n[1],c=function(e){return a(e.currentTarget.dataset.to)};return u.a.createElement(C.View,{activePanel:r},u.a.createElement(K,{id:"home",go:c}),u.a.createElement(J,{id:"friends",go:c}),u.a.createElement(Y,{id:"search",go:c}))},M=Object(f.d)(k,Object(f.a)(p.a));x.a.send("VKWebAppInit",{}),l.a.render(u.a.createElement(function(){return u.a.createElement(d.a,{store:M},u.a.createElement(q,null))},null),document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.4817d1bf.chunk.js.map