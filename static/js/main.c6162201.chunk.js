(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,n){e.exports=n(361)},361:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"default",function(){return v}),n.d(r,"getUser",function(){return b});var a={};n.r(a),n.d(a,"default",function(){return j}),n.d(a,"getFriends",function(){return U});var c={};n.r(c),n.d(c,"fetchedUser",function(){return V});var u={};n.r(u),n.d(u,"fetchedFriends",function(){return R});n(153),n(155);var o=n(1),i=n.n(o),s=n(61),l=n.n(s),f=n(37),d=n(55),p=n(148),h=n(151),E="SET_USER",m={photo_200:"",first_name:"\u0412\u0430\u0441\u044f",last_name:"\u0412\u0430\u0441\u0435\u0447\u043a\u0438\u043d",city:{title:"New York"}};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case E:return Object(h.a)({},e,t.payload);default:return e}}var b=function(e){return e.user},_="FETCH_ACCESS_TOKEN",w="";var O=n(110),g="FETCHED_FRIENDS",y=[];function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case g:return[].concat(Object(O.a)(e),Object(O.a)(t.payload));default:return e}}var U=function(e){return e.friends.users},S=Object(f.c)({user:v,accessToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case _:return t.payload;default:return e}},friends:j}),x=n(56),F=n(150),k=n(11),C=(n(358),n(12)),T=n.n(C),I=n(30),D=function(){var e=Object(I.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.send("VKWebAppGetUserInfo",{});case 3:return t=e.sent,e.next=7,t.data;case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),Error(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(I.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.send("VKWebAppGetFriends",{});case 3:return t=e.sent,e.next=6,t.data.users;case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),Error(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),V=function(){return function(){var e=Object(I.a)(T.a.mark(function e(t){var n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:n=e.sent,t({type:E,payload:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},R=function(){return function(){var e=Object(I.a)(T.a.mark(function e(t){var n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,N();case 3:n=e.sent,t({type:g,payload:n});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},A=function(e){var t=e.fetchedUser;return i.a.createElement(k.Group,{title:"User Data Fetched with VK Connect"},i.a.createElement(k.ListItem,{before:t.photo_200?i.a.createElement(k.Avatar,{src:t.photo_200}):null,description:t.city&&t.city.title?t.city.title:""},"".concat(t.first_name," ").concat(t.last_name)))},H=Object(d.b)(function(e){return{fetchedUser:(0,r.getUser)(e)}},null)(function(e){var t=e.id,n=e.go,r=e.fetchedUser;return function(e){Object(o.useEffect)(function(){e((0,c.fetchedUser)())},[])}(e.dispatch),i.a.createElement(k.Panel,{id:t},i.a.createElement(k.PanelHeader,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),i.a.createElement(A,{fetchedUser:r,go:n}),i.a.createElement(k.Group,{title:"\u041f\u0435\u0440\u0435\u0445\u043e\u0434\u044b"},i.a.createElement(k.List,null,i.a.createElement(k.Cell,{expandable:!0,onClick:n,"data-to":"friends"},"\u0414\u0440\u0443\u0437\u044c\u044f"))))}),K=n(149),P=n.n(K),G=n(107),L=n.n(G),X=Object(d.b)(function(e){return{fetchedFriends:(0,a.getFriends)(e)}},null)(function(e){var t=e.id,n=e.go,r=e.fetchedFriends,a=e.dispatch,c=Object(k.platform)();return function(e){Object(o.useEffect)(function(){e((0,u.fetchedFriends)())},[])}(a),console.log(r),i.a.createElement(k.Panel,{id:t},i.a.createElement(k.PanelHeader,{left:i.a.createElement(k.HeaderButton,{onClick:e.go,"data-to":"home"},c===k.IOS?i.a.createElement(P.a,null):i.a.createElement(L.a,null))},"\u0414\u0440\u0443\u0437\u044c\u044f"),r&&r.map(function(e){return i.a.createElement(A,{fetchedUser:{id:e.id,first_name:e.first_name,last_name:e.last_name},go:n})}))}),W=function(e){var t=e.fetchedUser,n=Object(o.useState)("home"),r=Object(F.a)(n,2),a=r[0],c=r[1],u=function(e){return c(e.currentTarget.dataset.to)};return i.a.createElement(k.View,{activePanel:a},i.a.createElement(H,{id:"home",fetchedUser:t,go:u}),i.a.createElement(X,{id:"friends",fetchedUser:t,go:u}))},B=Object(f.e)(S,Object(f.d)(Object(f.a)(p.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));x.a.send("VKWebAppInit",{}).then(function(e){return console.log("SUCCESS:",e)}).catch(function(e){return console.log("ERR:",e)}),l.a.render(i.a.createElement(function(){return i.a.createElement(d.a,{store:B},i.a.createElement(W,null))},null),document.getElementById("root"))}},[[152,1,2]]]);
//# sourceMappingURL=main.c6162201.chunk.js.map